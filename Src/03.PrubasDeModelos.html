<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>prubasdemodelos</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="03.PrubasDeModelos_files/libs/clipboard/clipboard.min.js"></script>
<script src="03.PrubasDeModelos_files/libs/quarto-html/quarto.js"></script>
<script src="03.PrubasDeModelos_files/libs/quarto-html/popper.min.js"></script>
<script src="03.PrubasDeModelos_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="03.PrubasDeModelos_files/libs/quarto-html/anchor.min.js"></script>
<link href="03.PrubasDeModelos_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="03.PrubasDeModelos_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="03.PrubasDeModelos_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="03.PrubasDeModelos_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="03.PrubasDeModelos_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">




<pre><code>---</code></pre>
<p>title: “Nuevo modelo” format: html editor: visual</p>
<p>Rendering: embed-resources: true —</p>
<section id="librerias" class="level1">
<h1>Librerias</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.3     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survminer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: ggpubr

Attaching package: 'survminer'

The following object is masked from 'package:survival':

    myeloma</code></pre>
</div>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xtable)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'kableExtra'

The following object is masked from 'package:dplyr':

    group_rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt) <span class="co"># Para una mejor visulización de las tablas</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra) <span class="co"># Para poner gráficos uno al lado del otro</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'gridExtra'

The following object is masked from 'package:dplyr':

    combine</code></pre>
</div>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggcorrplot) <span class="co"># Para la creación del gráfico de correlación</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'scales'

The following object is masked from 'package:purrr':

    discard

The following object is masked from 'package:readr':

    col_factor</code></pre>
</div>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(viridis)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Loading required package: viridisLite

Attaching package: 'viridis'

The following object is masked from 'package:scales':

    viridis_pal</code></pre>
</div>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(timeROC)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="datos" class="level1">
<h1>Datos</h1>
</section>
<section id="análisis-exploratorio-de-los-datos" class="level1">
<h1>Análisis exploratorio de los datos</h1>
<p>La base de datos <em>Arkansas</em> está formada por 564 observaciones de las cuales se tomaron 23 variables, de las cuales usaremos X para nuestro estudio.</p>
<div class="cell">
<div class="cell-output-display">
<div id="rucbbbgyzc" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#rucbbbgyzc table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#rucbbbgyzc thead, #rucbbbgyzc tbody, #rucbbbgyzc tfoot, #rucbbbgyzc tr, #rucbbbgyzc td, #rucbbbgyzc th {
  border-style: none;
}

#rucbbbgyzc p {
  margin: 0;
  padding: 0;
}

#rucbbbgyzc .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#rucbbbgyzc .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#rucbbbgyzc .gt_title {
  color: #333333;
  font-size: 18px;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#rucbbbgyzc .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#rucbbbgyzc .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rucbbbgyzc .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rucbbbgyzc .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#rucbbbgyzc .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#rucbbbgyzc .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#rucbbbgyzc .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#rucbbbgyzc .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#rucbbbgyzc .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#rucbbbgyzc .gt_spanner_row {
  border-bottom-style: hidden;
}

#rucbbbgyzc .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#rucbbbgyzc .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#rucbbbgyzc .gt_from_md > :first-child {
  margin-top: 0;
}

#rucbbbgyzc .gt_from_md > :last-child {
  margin-bottom: 0;
}

#rucbbbgyzc .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#rucbbbgyzc .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#rucbbbgyzc .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#rucbbbgyzc .gt_row_group_first td {
  border-top-width: 2px;
}

#rucbbbgyzc .gt_row_group_first th {
  border-top-width: 2px;
}

#rucbbbgyzc .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rucbbbgyzc .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#rucbbbgyzc .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#rucbbbgyzc .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rucbbbgyzc .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#rucbbbgyzc .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#rucbbbgyzc .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#rucbbbgyzc .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#rucbbbgyzc .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#rucbbbgyzc .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rucbbbgyzc .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rucbbbgyzc .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#rucbbbgyzc .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#rucbbbgyzc .gt_left {
  text-align: left;
}

#rucbbbgyzc .gt_center {
  text-align: center;
}

#rucbbbgyzc .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#rucbbbgyzc .gt_font_normal {
  font-weight: normal;
}

#rucbbbgyzc .gt_font_bold {
  font-weight: bold;
}

#rucbbbgyzc .gt_font_italic {
  font-style: italic;
}

#rucbbbgyzc .gt_super {
  font-size: 65%;
}

#rucbbbgyzc .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#rucbbbgyzc .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#rucbbbgyzc .gt_indent_1 {
  text-indent: 5px;
}

#rucbbbgyzc .gt_indent_2 {
  text-indent: 10px;
}

#rucbbbgyzc .gt_indent_3 {
  text-indent: 15px;
}

#rucbbbgyzc .gt_indent_4 {
  text-indent: 20px;
}

#rucbbbgyzc .gt_indent_5 {
  text-indent: 25px;
}

#rucbbbgyzc .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#rucbbbgyzc div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="3" class="gt_heading gt_title gt_font_normal gt_bottom_border">Variables de estudio</th>
</tr>
<tr class="odd gt_col_headings">
<th id="nombres_variables" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Variable</th>
<th id="variable_usada" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Analizada</th>
<th id="explicacion" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Explicación</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_variables">original order</td>
<td class="gt_row gt_left" headers="variable_usada">No</td>
<td class="gt_row gt_left" headers="explicacion">Orden de los datos</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="nombres_variables">PATID</td>
<td class="gt_row gt_left" headers="variable_usada">No</td>
<td class="gt_row gt_left" headers="explicacion">Identificación Paciente</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_variables">PROT</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Tratamiento Recibido ("TT2" o "TT3")</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="nombres_variables">SEX</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Sexo del paciente ("male" o "female")</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_variables">RACE</td>
<td class="gt_row gt_left" headers="variable_usada">No</td>
<td class="gt_row gt_left" headers="explicacion">Raza del paciente ("white" o "other")</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="nombres_variables">ISOTYPE</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Isotipo del paciente ("IgA" , "IgG", "IgM" o "IgE")</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_variables">AGE</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Edad del paciente (en meses)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="nombres_variables">B2M</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Niveles de Microglobulina beta-2 (en mg/l)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_variables">CRP</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Niveles de Proteína C-Reactiva (en mg/l)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="nombres_variables">CREAT</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Niveles de Creatinina (en mg/dl)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_variables">LDH</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Niveles de Lactato Deshidrogenasa (en U/l)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="nombres_variables">ALB</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Niveles de Albúmina (en g/l)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_variables">HGB</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Niveles de Hemoglobina (en g/dl)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="nombres_variables">ASPC</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Células plasmáticas en aspirado de médula ósea</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_variables">BMPC</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Células plasmáticas en biopsia de médula ósea</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="nombres_variables">MRI</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Número de lesiones focales</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_variables">Cyto_Abn</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Indica si presenta mutaciones citogenéticas (0 = No , 1 = Sí)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="nombres_variables">CPS1</td>
<td class="gt_row gt_left" headers="variable_usada">No</td>
<td class="gt_row gt_left" headers="explicacion">Variable sin contexto</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_variables">CPR1</td>
<td class="gt_row gt_left" headers="variable_usada">No</td>
<td class="gt_row gt_left" headers="explicacion">Variable sin contexto</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="nombres_variables">EFS_Censor</td>
<td class="gt_row gt_left" headers="variable_usada">No (de momento)</td>
<td class="gt_row gt_left" headers="explicacion">Indica si el paciente ha recaido (0 = No | 1 = Sí)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_variables">EFS_Time</td>
<td class="gt_row gt_left" headers="variable_usada">No (de momento)</td>
<td class="gt_row gt_left" headers="explicacion">Tiempo sin recaer (en meses)</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="nombres_variables">OS_Censor</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Indica si el paciente falleció (0 = No | 1 = Sí)</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_variables">OS_Time</td>
<td class="gt_row gt_left" headers="variable_usada">Si</td>
<td class="gt_row gt_left" headers="explicacion">Tiempo de supervivencia (en meses)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>Algunos de los pacientes presentan censura, es decir, en su último control, este, no había fallecido. Además, algunas de las observaciones tienen datos faltantes, veamos cuales son estas variables y cuantos datos faltan para cada una y contabilicemos el nivel de censura que presentan los datos.</p>
<div class="cell">
<div class="cell-output-display">
<div id="blomkflnsp" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#blomkflnsp table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#blomkflnsp thead, #blomkflnsp tbody, #blomkflnsp tfoot, #blomkflnsp tr, #blomkflnsp td, #blomkflnsp th {
  border-style: none;
}

#blomkflnsp p {
  margin: 0;
  padding: 0;
}

#blomkflnsp .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#blomkflnsp .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#blomkflnsp .gt_title {
  color: #333333;
  font-size: 18px;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#blomkflnsp .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#blomkflnsp .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#blomkflnsp .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#blomkflnsp .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#blomkflnsp .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#blomkflnsp .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#blomkflnsp .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#blomkflnsp .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#blomkflnsp .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#blomkflnsp .gt_spanner_row {
  border-bottom-style: hidden;
}

#blomkflnsp .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#blomkflnsp .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#blomkflnsp .gt_from_md > :first-child {
  margin-top: 0;
}

#blomkflnsp .gt_from_md > :last-child {
  margin-bottom: 0;
}

#blomkflnsp .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#blomkflnsp .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#blomkflnsp .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#blomkflnsp .gt_row_group_first td {
  border-top-width: 2px;
}

#blomkflnsp .gt_row_group_first th {
  border-top-width: 2px;
}

#blomkflnsp .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#blomkflnsp .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#blomkflnsp .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#blomkflnsp .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#blomkflnsp .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#blomkflnsp .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#blomkflnsp .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#blomkflnsp .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#blomkflnsp .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#blomkflnsp .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#blomkflnsp .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#blomkflnsp .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#blomkflnsp .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#blomkflnsp .gt_left {
  text-align: left;
}

#blomkflnsp .gt_center {
  text-align: center;
}

#blomkflnsp .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#blomkflnsp .gt_font_normal {
  font-weight: normal;
}

#blomkflnsp .gt_font_bold {
  font-weight: bold;
}

#blomkflnsp .gt_font_italic {
  font-style: italic;
}

#blomkflnsp .gt_super {
  font-size: 65%;
}

#blomkflnsp .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#blomkflnsp .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#blomkflnsp .gt_indent_1 {
  text-indent: 5px;
}

#blomkflnsp .gt_indent_2 {
  text-indent: 10px;
}

#blomkflnsp .gt_indent_3 {
  text-indent: 15px;
}

#blomkflnsp .gt_indent_4 {
  text-indent: 20px;
}

#blomkflnsp .gt_indent_5 {
  text-indent: 25px;
}

#blomkflnsp .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#blomkflnsp div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="2" class="gt_heading gt_title gt_font_normal gt_bottom_border">Datos faltantes por variable</th>
</tr>
<tr class="odd gt_col_headings">
<th id="Variable" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Variable</th>
<th id="Faltantes" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Datos faltantes</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">MRI</td>
<td class="gt_row gt_right" headers="Faltantes">37</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">ASPC</td>
<td class="gt_row gt_right" headers="Faltantes">28</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">ISOTYPE</td>
<td class="gt_row gt_right" headers="Faltantes">26</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">BMPC</td>
<td class="gt_row gt_right" headers="Faltantes">16</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">CRP</td>
<td class="gt_row gt_right" headers="Faltantes">4</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="Variable">CREAT</td>
<td class="gt_row gt_right" headers="Faltantes">3</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Variable">B2M</td>
<td class="gt_row gt_right" headers="Faltantes">1</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 174</code></pre>
</div>
</div>
<p>También es interesante determinar si los niveles de las variables clínicas se encuentran en niveles sanos. Para eso, añadimos a nuestra base de datos estas variables. Los niveles sanos de las diferentes variables se han obtenido de MayoClinic y MedlinePlus.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/B2M-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Proporciones calculadas</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>proporcionHGB_sano_hombres <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">nrow</span>(Arkansas[Arkansas<span class="sc">$</span>HGB_flag <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> Arkansas<span class="sc">$</span>SEX <span class="sc">==</span> <span class="st">"male"</span>,]) <span class="sc">/</span> numero_hombres,<span class="dv">4</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>proporcionHGB_mal_hombres <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">nrow</span>(Arkansas[Arkansas<span class="sc">$</span>HGB_flag <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> Arkansas<span class="sc">$</span>SEX <span class="sc">==</span> <span class="st">"male"</span>, ]) <span class="sc">/</span> numero_hombres, <span class="dv">4</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable categórica</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>Arkansas<span class="sc">$</span>Estado_HGB_MALE <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(Arkansas<span class="sc">$</span>HGB_flag <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> Arkansas<span class="sc">$</span>SEX <span class="sc">==</span> <span class="st">"male"</span>, <span class="st">"Saludable"</span>, <span class="st">"No saludable"</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Paleta accesible</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>custom_colors <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Saludable"</span> <span class="ot">=</span> <span class="st">"lightgreen"</span>, <span class="st">"No saludable"</span> <span class="ot">=</span> <span class="st">"lightblue"</span>)</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico para hombres</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>grafico_HGB_MALE <span class="ot">=</span> Arkansas <span class="sc">%&gt;%</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SEX <span class="sc">==</span> <span class="st">"male"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> HGB, <span class="at">fill =</span> Estado_HGB_MALE)) <span class="sc">+</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="dv">1</span>, <span class="at">binwidth =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Personalización de la leyenda</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Estado"</span>,</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> custom_colors,</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"No saludable: "</span>, proporcionHGB_mal_hombres <span class="sc">*</span> <span class="dv">100</span>, <span class="st">"%"</span>),</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"Saludable: "</span>, proporcionHGB_sano_hombres <span class="sc">*</span> <span class="dv">100</span>, <span class="st">"%"</span>)</span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Títulos</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Distribución de HGB en hombres"</span>) <span class="sc">+</span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Nivel de Hemoglobina"</span>, <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">19</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>), <span class="co"># Título principal</span></span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),  <span class="co"># Tamaño del texto del eje X</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),  <span class="co"># Tamaño del texto del eje Y</span></span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">17</span>), <span class="co"># Tamaño del título del eje X</span></span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">17</span>),  <span class="co"># Tamaño del título del eje Y</span></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">17</span>),  <span class="co"># Tamaño del texto de la leyenda</span></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="fl">14.5</span>), <span class="co"># Tamaño y estilo del título de la leyenda</span></span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.8</span>, <span class="st">"cm"</span>),  <span class="co"># Tamaño de las claves de la leyenda</span></span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>  <span class="co"># Posición de la leyenda</span></span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(grafico_HGB_MALE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Proporciones calculadas</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>proporcionHGB_sano_mujeres <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">nrow</span>(Arkansas[Arkansas<span class="sc">$</span>HGB_flag <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> Arkansas<span class="sc">$</span>SEX <span class="sc">==</span> <span class="st">"female"</span>,]) <span class="sc">/</span> numero_mujeres,<span class="dv">4</span>)</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>proporcionHGB_mal_mujeres <span class="ot">=</span> <span class="fu">round</span>(<span class="fu">nrow</span>(Arkansas[Arkansas<span class="sc">$</span>HGB_flag <span class="sc">==</span> <span class="dv">1</span> <span class="sc">&amp;</span> Arkansas<span class="sc">$</span>SEX <span class="sc">==</span> <span class="st">"female"</span>, ]) <span class="sc">/</span> numero_mujeres,<span class="dv">4</span>)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Variable categórica</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>Arkansas<span class="sc">$</span>Estado_HGB_FEMALE <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(Arkansas<span class="sc">$</span>HGB_flag <span class="sc">==</span> <span class="dv">0</span> <span class="sc">&amp;</span> Arkansas<span class="sc">$</span>SEX <span class="sc">==</span> <span class="st">"female"</span>, <span class="st">"Saludable"</span>, <span class="st">"No saludable"</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico para mujeres</span></span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>grafico_HGB_FEMALE <span class="ot">=</span> Arkansas <span class="sc">%&gt;%</span></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(SEX <span class="sc">==</span> <span class="st">"female"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> HGB, <span class="at">fill =</span> Estado_HGB_FEMALE)) <span class="sc">+</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="dv">1</span>, <span class="at">binwidth =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Personalización de la leyenda</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Estado"</span>,</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">values =</span> custom_colors,</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"No saludable: "</span>, proporcionHGB_mal_mujeres <span class="sc">*</span> <span class="dv">100</span>, <span class="st">"%"</span>),</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>      <span class="fu">paste0</span>(<span class="st">"Saludable: "</span>, proporcionHGB_sano_mujeres <span class="sc">*</span> <span class="dv">100</span>, <span class="st">"%"</span>)</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Títulos</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Distribución de HGB en mujeres"</span>) <span class="sc">+</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Nivel de Hemoglobina"</span>, <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">10</span>)) <span class="sc">+</span></span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb17-29"><a href="#cb17-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb17-30"><a href="#cb17-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">19</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>),</span>
<span id="cb17-31"><a href="#cb17-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">17</span>),</span>
<span id="cb17-32"><a href="#cb17-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">17</span>),</span>
<span id="cb17-33"><a href="#cb17-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb17-34"><a href="#cb17-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb17-35"><a href="#cb17-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>),</span>
<span id="cb17-36"><a href="#cb17-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb17-37"><a href="#cb17-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.key.size =</span> <span class="fu">unit</span>(<span class="fl">0.7</span>, <span class="st">"cm"</span>),</span>
<span id="cb17-38"><a href="#cb17-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span></span>
<span id="cb17-39"><a href="#cb17-39" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb17-40"><a href="#cb17-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-41"><a href="#cb17-41" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(grafico_HGB_FEMALE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>grafico_OS_Time <span class="ot">=</span> Arkansas <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> OS_Time)) <span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"#1f78b4"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">bins =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Títulos</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Distribución de OS_Time"</span>,<span class="at">subtitle =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tiempo (meses)"</span>, <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">10</span>)) <span class="sc">+</span> </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">19</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>), <span class="co"># Título principal</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),  <span class="co"># Tamaño del texto del eje X</span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),  <span class="co"># Tamaño del texto del eje Y</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>), <span class="co"># Tamaño del título del eje X</span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>)  <span class="co"># Tamaño del título del eje Y</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>grafico_OS_Time</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>grafico_AGE <span class="ot">&lt;-</span> Arkansas <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> AGE)) <span class="sc">+</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..count..), <span class="at">fill =</span> <span class="st">"#1f78b4"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Títulos</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Distribución de AGE"</span>) <span class="sc">+</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Edad (en años)"</span>, <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">10</span>)) <span class="sc">+</span> </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Tema y ajuste del tamaño del texto de los ejes</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">19</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>), <span class="co"># Título principal</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),    <span class="co"># Tamaño del texto del eje X</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),    <span class="co"># Tamaño del texto del eje Y</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),   <span class="co"># Tamaño del título del eje X</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>)    <span class="co"># Tamaño del título del eje Y</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>grafico_AGE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The dot-dot notation (`..count..`) was deprecated in ggplot2 3.4.0.
ℹ Please use `after_stat(count)` instead.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="variables-categoricas" class="level4">
<h4 class="anchored" data-anchor-id="variables-categoricas">Variables categoricas</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el gráfico de barras</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>grafico_barras_ISOTYPE <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">na.omit</span>(Arkansas), <span class="fu">aes</span>(<span class="at">x =</span> ISOTYPE)) <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"#56B4E9"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Añadir las frecuencias sobre cada barra</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"count"</span>, <span class="fu">aes</span>(<span class="at">label =</span> ..count..), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">5</span>) <span class="sc">+</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mejorar la estética del gráfico</span></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de ISOTYPE"</span>, <span class="at">x =</span> <span class="st">"Isotipo"</span>, <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="fu">max</span>(<span class="fu">table</span>(Arkansas<span class="sc">$</span>ISOTYPE)) <span class="sc">*</span> <span class="fl">1.1</span>) <span class="sc">+</span>  <span class="co"># Aumenta el límite del eje y un 10%</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>)</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>grafico_barras_ISOTYPE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el gráfico de barras</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>grafico_barras_SEX <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">na.omit</span>(Arkansas), <span class="fu">aes</span>(<span class="at">x =</span> SEX)) <span class="sc">+</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"#56B4E9"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Añadir las frecuencias sobre cada barra</span></span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"count"</span>, <span class="fu">aes</span>(<span class="at">label =</span> ..count..), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mejorar la estética del gráfico</span></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de SEX"</span>, <span class="at">x =</span> <span class="st">"Sexo"</span>, <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="fu">max</span>(<span class="fu">table</span>(Arkansas<span class="sc">$</span>ISOTYPE)) <span class="sc">*</span> <span class="fl">1.1</span>) <span class="sc">+</span>  <span class="co"># Aumenta el límite del eje y un 10%</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>grafico_barras_SEX</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el gráfico de barras</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>grafico_barras_PROT <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Arkansas_SinDatosFaltantes, <span class="fu">aes</span>(<span class="at">x =</span> PROT)) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"#56B4E9"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Añadir las frecuencias sobre cada barra</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"count"</span>, <span class="fu">aes</span>(<span class="at">label =</span> ..count..), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mejorar la estética del gráfico</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de PROT"</span>, <span class="at">x =</span> <span class="st">"Tratamiento"</span>, <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="fu">max</span>(<span class="fu">table</span>(Arkansas_SinDatosFaltantes<span class="sc">$</span>PROT)) <span class="sc">*</span> <span class="fl">1.1</span>) <span class="sc">+</span>  <span class="co"># Aumenta el límite del eje y un 10%</span></span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">17</span>)</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>grafico_barras_PROT</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el gráfico de barras</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>grafico_barras_RACE <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="fu">na.omit</span>(Arkansas), <span class="fu">aes</span>(<span class="at">x =</span> RACE)) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"#1f78b4"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Añadir las frecuencias sobre cada barra</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"count"</span>, <span class="fu">aes</span>(<span class="at">label =</span> ..count..), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mejorar la estética del gráfico</span></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de RACE"</span>, <span class="at">x =</span> <span class="st">"Raza"</span>, <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>, <span class="fu">max</span>(<span class="fu">table</span>(Arkansas<span class="sc">$</span>RACE)) <span class="sc">*</span> <span class="fl">1.1</span>) <span class="sc">+</span>  <span class="co"># Aumenta el límite del eje y un 10%</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">17</span>)</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>grafico_barras_RACE</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>grafico_CytoABN <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Arkansas, <span class="fu">aes</span>(<span class="at">x =</span> Cyto_Abn)) <span class="sc">+</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"#1f78b4"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Diagrama de Barras de Cyto_Abn"</span>, <span class="at">x =</span> <span class="st">"Alteraciones Citogenéticas"</span>, <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Sin alteraciones"</span>, <span class="st">"Con alteraciones"</span>)) <span class="sc">+</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">stat =</span> <span class="st">"count"</span>, <span class="fu">aes</span>(<span class="at">label =</span> ..count..), <span class="at">vjust =</span> <span class="sc">-</span><span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="dv">400</span>)<span class="sc">+</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">16</span>, <span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>),</span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">17</span>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionar las variables de interés y omitir los NA</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>variables_interes <span class="ot">&lt;-</span> Arkansas[,<span class="dv">7</span><span class="sc">:</span><span class="dv">16</span>] <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>()</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular la matriz de correlación</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>matriz_correlacion <span class="ot">&lt;-</span> <span class="fu">cor</span>(variables_interes)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Generar el gráfico de correlación</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>grafico_correlaciones <span class="ot">&lt;-</span> <span class="fu">ggcorrplot</span>(matriz_correlacion, </span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>           <span class="at">hc.order =</span> <span class="cn">TRUE</span>,         <span class="co"># Ordenar jerárquicamente</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>           <span class="at">type =</span> <span class="st">"lower"</span>,          <span class="co"># Mostrar solo la mitad inferior</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">lab =</span> <span class="cn">TRUE</span>,              <span class="co"># Añadir los valores de correlación</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">lab_size =</span> <span class="fl">3.6</span>,          <span class="co"># Tamaño del texto de los valores</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">colors =</span> <span class="fu">c</span>(<span class="st">"#4575b4"</span>, <span class="st">"#f7f7f7"</span>, <span class="st">"#d73027"</span>)) <span class="sc">+</span>  <span class="co"># Colores personalizados</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Mapa de Correlación de Variables"</span>) <span class="sc">+</span>    <span class="co"># Añadir título</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Variables"</span>, <span class="at">y =</span> <span class="st">"Variables"</span>) <span class="sc">+</span>         <span class="co"># Títulos de los ejes</span></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">16</span>),   <span class="co"># Centrar el título y ajustar tamaño</span></span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),   <span class="co"># Tamaño del título del eje x</span></span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>))   <span class="co"># Tamaño del título del eje y</span></span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>grafico_correlaciones</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardar el gráfico como PDF</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># B2M</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_barras_B2M.pdf"</span>, </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_B2M,  <span class="co"># Extraer solo el gráfico principal</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)  <span class="co"># Ajusta el tamaño y formato</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 row containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CREAT Male</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_barras_CREAT_MALE.pdf"</span>, </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_CREAT_MALE, </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="co"># CREAT Female</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_barras_CREAT_FEMALE.pdf"</span>, </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_CREAT_FEMALE, </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co"># CRP</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_barras_CRP.pdf"</span>, </span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_CRP, </span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># LDH</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_barras_LDH.pdf"</span>, </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_LDH, </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a><span class="co"># ALB</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_barras_ALB.pdf"</span>, </span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_ALB, </span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="co"># HGB Male</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_barras_HGB_MALE.pdf"</span>, </span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_HGB_MALE, </span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="co"># HGB Female</span></span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_barras_HGB_FEMALE.pdf"</span>, </span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_HGB_FEMALE, </span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a><span class="co"># AGE</span></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_barras_AGE.pdf"</span>, </span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_AGE,  <span class="co"># Extraer solo el gráfico principal</span></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)  <span class="co"># Ajusta el tamaño y formato</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="co"># SEX</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_barras_SEX.pdf"</span>, </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_barras_SEX, </span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co"># RACE</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_barras_RACE.pdf"</span>, </span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_barras_RACE, </span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="co"># RACE</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_barras_ISOTYPE.pdf"</span>, </span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_barras_ISOTYPE, </span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a><span class="co"># PROT</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_barras_PROT.pdf"</span>, </span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_barras_PROT, </span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a><span class="co"># CYTO_ABN</span></span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_CytoABN.pdf"</span>, </span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_CytoABN, </span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a><span class="co"># CORRELACIONES</span></span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Descriptive_graphs/grafico_Correlaciones.pdf"</span>, </span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">plot =</span> grafico_correlaciones, </span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"factoextra"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Welcome! Want to learn more? See two factoextra-related books at https://goo.gl/ve3WBa</code></pre>
</div>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>Arkansas_ACP <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(variables_interes, <span class="at">scale =</span> <span class="cn">TRUE</span> )</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>Arkansas_ACP</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Standard deviations (1, .., p=10):
 [1] 1.6587614 1.2357778 1.0809356 1.0576047 0.9942560 0.9144975 0.7934263
 [8] 0.7066860 0.5425277 0.4316215

Rotation (n x k) = (10 x 10):
               PC1        PC2          PC3        PC4          PC5          PC6
AGE    0.070283953  0.1247287  0.193419160 -0.1232345 -0.943049262  0.114173982
B2M    0.467523103  0.2767767 -0.279853506 -0.2666382 -0.005316658 -0.004618669
CRP    0.167440551  0.3636479  0.445571752  0.3094954  0.202735747  0.339522723
CREAT  0.384301872  0.3451742 -0.416400297 -0.3174036  0.075075027  0.014125328
LDH    0.153178538  0.1665594 -0.308538842  0.6310927 -0.091869462  0.480318564
ALB   -0.280181532 -0.2093438 -0.590062144  0.1161018 -0.073294665  0.134041278
HGB   -0.430872413  0.1370854 -0.248448088  0.0569348 -0.158536402  0.013424649
ASPC   0.389928314 -0.4648953 -0.008197213  0.2228566 -0.104933015 -0.093370768
BMPC   0.401308745 -0.4442035 -0.046750914  0.1836527 -0.067806516 -0.140995616
MRI    0.006989706  0.3907029 -0.070702231  0.4677525 -0.096629301 -0.770724784
              PC7          PC8          PC9         PC10
AGE   -0.07294735  0.125260827  0.022410176 -0.054898091
B2M   -0.06304189 -0.127865289  0.040746480  0.730321320
CRP   -0.62330693  0.013599205 -0.016177131 -0.008166101
CREAT -0.10751355 -0.008784941 -0.100574436 -0.656844941
LDH    0.46114439 -0.030621909  0.048583621 -0.014897877
ALB   -0.50339243  0.475338376 -0.005091156  0.115346974
HGB   -0.24572200 -0.802077201 -0.037993561 -0.011130293
ASPC  -0.13194973 -0.177030772 -0.716669576  0.001037778
BMPC  -0.21320954 -0.218206890  0.685396354 -0.135655288
MRI   -0.03643204  0.136131661 -0.015727324  0.007128664</code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>lambdas <span class="ot">=</span> <span class="fu">get_eigenvalue</span>(Arkansas_ACP)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>lambdas</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       eigenvalue variance.percent cumulative.variance.percent
Dim.1   2.7514895        27.514895                    27.51489
Dim.2   1.5271467        15.271467                    42.78636
Dim.3   1.1684217        11.684217                    54.47058
Dim.4   1.1185277        11.185277                    65.65586
Dim.5   0.9885450         9.885450                    75.54131
Dim.6   0.8363056         8.363056                    83.90436
Dim.7   0.6295252         6.295252                    90.19961
Dim.8   0.4994051         4.994051                    95.19367
Dim.9   0.2943363         2.943363                    98.13703
Dim.10  0.1862972         1.862972                   100.00000</code></pre>
</div>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_eig</span>(Arkansas_ACP, <span class="at">addlabels =</span> <span class="cn">TRUE</span>,<span class="at">ylim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_pca_var</span>(Arkansas_ACP, <span class="at">col.var =</span> <span class="st">"contrib"</span>, <span class="at">repel =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-22-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>var <span class="ot">=</span> <span class="fu">get_pca_var</span>(Arkansas_ACP)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_cos2</span>(Arkansas_ACP, <span class="at">choice =</span> <span class="st">"var"</span>, <span class="at">axes =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-22-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>Arkansas_ACP<span class="sc">$</span>rotation</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>               PC1        PC2          PC3        PC4          PC5          PC6
AGE    0.070283953  0.1247287  0.193419160 -0.1232345 -0.943049262  0.114173982
B2M    0.467523103  0.2767767 -0.279853506 -0.2666382 -0.005316658 -0.004618669
CRP    0.167440551  0.3636479  0.445571752  0.3094954  0.202735747  0.339522723
CREAT  0.384301872  0.3451742 -0.416400297 -0.3174036  0.075075027  0.014125328
LDH    0.153178538  0.1665594 -0.308538842  0.6310927 -0.091869462  0.480318564
ALB   -0.280181532 -0.2093438 -0.590062144  0.1161018 -0.073294665  0.134041278
HGB   -0.430872413  0.1370854 -0.248448088  0.0569348 -0.158536402  0.013424649
ASPC   0.389928314 -0.4648953 -0.008197213  0.2228566 -0.104933015 -0.093370768
BMPC   0.401308745 -0.4442035 -0.046750914  0.1836527 -0.067806516 -0.140995616
MRI    0.006989706  0.3907029 -0.070702231  0.4677525 -0.096629301 -0.770724784
              PC7          PC8          PC9         PC10
AGE   -0.07294735  0.125260827  0.022410176 -0.054898091
B2M   -0.06304189 -0.127865289  0.040746480  0.730321320
CRP   -0.62330693  0.013599205 -0.016177131 -0.008166101
CREAT -0.10751355 -0.008784941 -0.100574436 -0.656844941
LDH    0.46114439 -0.030621909  0.048583621 -0.014897877
ALB   -0.50339243  0.475338376 -0.005091156  0.115346974
HGB   -0.24572200 -0.802077201 -0.037993561 -0.011130293
ASPC  -0.13194973 -0.177030772 -0.716669576  0.001037778
BMPC  -0.21320954 -0.218206890  0.685396354 -0.135655288
MRI   -0.03643204  0.136131661 -0.015727324  0.007128664</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_pca_biplot</span>(Arkansas_ACP, <span class="at">repel =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-22-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="modelo-de-cox-sin-datos-faltantes" class="level1">
<h1>MODELO DE COX <u>SIN DATOS FALTANTES</u></h1>
<p>Para la primera sección, trabajaremos sin los datos faltantes. Definimos un nuevo data frame eliminando estas observaciones.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Consideramos la base de datos sin datos faltantes.</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>Arkansas_SinDatosFaltantes <span class="ot">=</span> <span class="fu">na.omit</span>(Arkansas)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>Arkansas_SinDatosFaltantes <span class="ot">=</span> Arkansas_SinDatosFaltantes[<span class="sc">!</span>Arkansas_SinDatosFaltantes<span class="sc">$</span>ISOTYPE <span class="sc">==</span> <span class="st">"Nonsecretory"</span>,]</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Hay que convertir la Variable ISOTYPE en variables "dummies"</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>Arkansas_SinDatosFaltantes <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span>ISOTYPE <span class="sc">-</span> <span class="dv">1</span>, <span class="at">data =</span> Arkansas_SinDatosFaltantes) <span class="sc">%&gt;%</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cbind</span>(Arkansas_SinDatosFaltantes)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar librerías necesarias</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(factoextra)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Seleccionar variables numéricas para calcular distancias</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>variables_numericas <span class="ot">&lt;-</span> Arkansas[, <span class="fu">c</span>(<span class="st">"AGE"</span>, <span class="st">"B2M"</span>, <span class="st">"CRP"</span>, <span class="st">"CREAT"</span>, <span class="st">"LDH"</span>, <span class="st">"ALB"</span>, <span class="st">"HGB"</span>, <span class="st">"ASPC"</span>, <span class="st">"BMPC"</span>, <span class="st">"MRI"</span>)]</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Escalar las variables para que tengan la misma importancia</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>variables_numericas_scaled <span class="ot">&lt;-</span> <span class="fu">scale</span>(variables_numericas)</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular la matriz de distancias (euclídea por defecto)</span></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>matriz_distancia <span class="ot">&lt;-</span> <span class="fu">dist</span>(variables_numericas_scaled)</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar el heatmap de distancias</span></span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_dist</span>(<span class="fu">as.dist</span>(matriz_distancia), </span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>          <span class="at">gradient =</span> <span class="fu">list</span>(<span class="at">low =</span> <span class="st">"blue"</span>, <span class="at">mid =</span> <span class="st">"white"</span>, <span class="at">high =</span> <span class="st">"red"</span>), <span class="co"># Colores para personas con deuteranopia</span></span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>          <span class="at">lab_size =</span> <span class="dv">4</span>, <span class="co"># Tamaño de etiquetas</span></span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>          <span class="at">show_labels =</span> <span class="cn">TRUE</span>) <span class="co"># Mostrar etiquetas de los individuos</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar librerías necesarias</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(factoextra)</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cluster)</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>datos_clustering <span class="ot">&lt;-</span> Arkansas_SinDatosFaltantes[Arkansas_SinDatosFaltantes<span class="sc">$</span>OS_Censor <span class="sc">==</span> <span class="dv">1</span>,]</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>datos_clustering <span class="ot">&lt;-</span> Arkansas_SinDatosFaltantes</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>variables_numericas <span class="ot">&lt;-</span> datos_clustering[, <span class="fu">c</span>(<span class="st">"AGE"</span>, <span class="st">"B2M"</span>, <span class="st">"LDH"</span>, <span class="st">"ALB"</span>, <span class="st">"MRI"</span>, <span class="st">"OS_Time"</span>)] </span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>variables_numericas_scaled <span class="ot">&lt;-</span> <span class="fu">scale</span>(variables_numericas)</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Determinar el número óptimo de clusters con el método del codo</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_nbclust</span>(variables_numericas_scaled, kmeans, <span class="at">method =</span> <span class="st">"wss"</span>) <span class="sc">+</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Método del Codo para Determinar el Número de Clusters"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicar K-means clustering con el número óptimo de clusters </span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>) <span class="co"># Para reproducibilidad</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>kmeans_result <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(variables_numericas_scaled, <span class="at">centers =</span><span class="dv">2</span>, <span class="at">nstart =</span> <span class="dv">30</span>)</span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Añadir el cluster a los datos originales</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>datos_clustering<span class="sc">$</span>Cluster <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(kmeans_result<span class="sc">$</span>cluster)</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar los clusters con PCA</span></span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_cluster</span>(kmeans_result, <span class="at">data =</span> variables_numericas_scaled,</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">geom =</span> <span class="st">"point"</span>, <span class="at">ellipse.type =</span> <span class="st">"convex"</span>, </span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>()) <span class="sc">+</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Visualización de Clusters con K-means"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-25-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular la matriz de distancia para clustering jerárquico</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>matriz_distancia <span class="ot">&lt;-</span> <span class="fu">dist</span>(variables_numericas_scaled)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Clustering jerárquico</span></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>hclust_result <span class="ot">&lt;-</span> <span class="fu">hclust</span>(matriz_distancia, <span class="at">method =</span> <span class="st">"ward.D2"</span>)</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Visualizar el dendrograma con 3 clusters</span></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_dend</span>(hclust_result, <span class="at">k =</span> <span class="dv">2</span>, <span class="co"># Número de clusters</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>          <span class="at">rect =</span> <span class="cn">TRUE</span>, <span class="co"># Dibujar rectángulos alrededor de los clusters</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>          <span class="at">rect_fill =</span> <span class="cn">TRUE</span>,</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>          <span class="at">rect_border =</span> <span class="st">"jco"</span>,</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>          <span class="at">labels_track_height =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Dendrograma de Clustering Jerárquico"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The `&lt;scale&gt;` argument of `guides()` cannot be `FALSE`. Use "none" instead as
of ggplot2 3.3.4.
ℹ The deprecated feature was likely used in the factoextra package.
  Please report the issue at &lt;https://github.com/kassambara/factoextra/issues&gt;.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-25-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluar la calidad de los clusters con análisis de silhouette</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">fviz_silhouette</span>(cluster<span class="sc">::</span><span class="fu">silhouette</span>(kmeans_result<span class="sc">$</span>cluster, <span class="fu">dist</span>(variables_numericas_scaled)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  cluster size ave.sil.width
1       1  159         -0.02
2       2  308          0.36</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-25-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Resumir las variables numéricas por cluster</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>cluster_summary <span class="ot">&lt;-</span> datos_clustering <span class="sc">%&gt;%</span></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Cluster) <span class="sc">%&gt;%</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), mean, <span class="at">.names =</span> <span class="st">"mean_{.col}"</span>))</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar la tabla resumen</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>kmeans_result<span class="sc">$</span>centers</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          AGE        B2M        LDH        ALB        MRI    OS_Time
1  0.15881978  0.5359420  0.6533908 -0.4911436  0.6728597 -0.7300905
2 -0.08198813 -0.2766713 -0.3373024  0.2535449 -0.3473529  0.3768974</code></pre>
</div>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(cluster_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 32
  Cluster mean_ISOTYPEFLC mean_ISOTYPEIgA mean_ISOTYPEIgD mean_ISOTYPEIgG
  &lt;fct&gt;             &lt;dbl&gt;           &lt;dbl&gt;           &lt;dbl&gt;           &lt;dbl&gt;
1 1                 0.208           0.220         0                 0.572
2 2                 0.120           0.279         0.00974           0.591
# ℹ 27 more variables: `mean_original order` &lt;dbl&gt;, mean_PATID &lt;dbl&gt;,
#   mean_AGE &lt;dbl&gt;, mean_B2M &lt;dbl&gt;, mean_CRP &lt;dbl&gt;, mean_CREAT &lt;dbl&gt;,
#   mean_LDH &lt;dbl&gt;, mean_ALB &lt;dbl&gt;, mean_HGB &lt;dbl&gt;, mean_ASPC &lt;dbl&gt;,
#   mean_BMPC &lt;dbl&gt;, mean_MRI &lt;dbl&gt;, mean_Cyto_Abn &lt;dbl&gt;, mean_CPS1 &lt;dbl&gt;,
#   mean_CPR1 &lt;dbl&gt;, mean_EFS_Censor &lt;dbl&gt;, mean_EFS_Time &lt;dbl&gt;,
#   mean_OS_Censor &lt;dbl&gt;, mean_OS_Time &lt;dbl&gt;, mean_AGE_flag &lt;dbl&gt;,
#   mean_B2M_flag &lt;dbl&gt;, mean_CREAT_flag &lt;dbl&gt;, mean_CRP_flag &lt;dbl&gt;, …</code></pre>
</div>
</div>
<p>Calculamos, para cada variable, un modelo de Cox univariable para observar la significancia individual que tienen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>covariates <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AGE"</span>, <span class="st">"SEX"</span>, <span class="st">"PROT"</span> ,<span class="st">"B2M"</span>, <span class="st">"ISOTYPEFLC"</span>, <span class="st">"ISOTYPEIgA"</span>, <span class="st">"ISOTYPEIgD"</span>, <span class="st">"ISOTYPEIgG"</span>, <span class="st">"RACE"</span> ,<span class="st">"CRP"</span>, <span class="st">"CREAT"</span>,<span class="st">"LDH"</span>,<span class="st">"ALB"</span>,<span class="st">"HGB"</span>, <span class="st">"ASPC"</span>,<span class="st">"BMPC"</span>, <span class="st">"MRI"</span>,<span class="st">"Cyto_Abn"</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>univ_formulas <span class="ot">&lt;-</span> <span class="fu">sapply</span>(covariates,</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>                        <span class="cf">function</span>(x) <span class="fu">as.formula</span>(<span class="fu">paste</span>(<span class="st">'Surv(OS_Time, OS_Censor)~'</span>, x)))</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>                        </span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>univ_models <span class="ot">&lt;-</span> <span class="fu">lapply</span>( univ_formulas, <span class="cf">function</span>(x){<span class="fu">coxph</span>(x, <span class="at">data =</span> Arkansas_SinDatosFaltantes)})</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract data </span></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>univ_results <span class="ot">&lt;-</span> <span class="fu">lapply</span>(univ_models,</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>                       <span class="cf">function</span>(x){ </span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>                          x <span class="ot">&lt;-</span> <span class="fu">summary</span>(x)</span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>                          p.value<span class="ot">&lt;-</span><span class="fu">signif</span>(x<span class="sc">$</span>wald[<span class="st">"pvalue"</span>], <span class="at">digits=</span><span class="dv">2</span>)</span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>                          wald.test<span class="ot">&lt;-</span><span class="fu">signif</span>(x<span class="sc">$</span>wald[<span class="st">"test"</span>], <span class="at">digits=</span><span class="dv">2</span>)</span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a>                          beta<span class="ot">&lt;-</span><span class="fu">signif</span>(x<span class="sc">$</span>coef[<span class="dv">1</span>], <span class="at">digits=</span><span class="dv">2</span>);<span class="co">#coeficient beta</span></span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a>                          HR <span class="ot">&lt;-</span><span class="fu">signif</span>(x<span class="sc">$</span>coef[<span class="dv">2</span>], <span class="at">digits=</span><span class="dv">2</span>);<span class="co">#exp(beta)</span></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a>                          HR.confint.lower <span class="ot">&lt;-</span> <span class="fu">signif</span>(x<span class="sc">$</span>conf.int[,<span class="st">"lower .95"</span>], <span class="dv">2</span>)</span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a>                          HR.confint.upper <span class="ot">&lt;-</span> <span class="fu">signif</span>(x<span class="sc">$</span>conf.int[,<span class="st">"upper .95"</span>],<span class="dv">2</span>)</span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a>                          HR <span class="ot">&lt;-</span> <span class="fu">paste0</span>(HR, <span class="st">" ("</span>, </span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>                                       HR.confint.lower, <span class="st">"-"</span>, HR.confint.upper, <span class="st">")"</span>)</span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a>                          res<span class="ot">&lt;-</span><span class="fu">c</span>(beta, HR, wald.test, p.value)</span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">names</span>(res)<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="st">"beta"</span>, <span class="st">"HR (95% CI for HR)"</span>, <span class="st">"wald.test"</span>, </span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a>                                        <span class="st">"p.value"</span>)</span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a>                          <span class="fu">return</span>(res)</span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a>                          <span class="co">#return(exp(cbind(coef(x),confint(x))))</span></span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>                         })</span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">as.data.frame</span>(univ_results, <span class="at">check.names =</span> <span class="cn">FALSE</span>))</span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span>(res)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>             beta HR (95% CI for HR) wald.test p.value
AGE          0.02            1 (1-1)       5.5   0.019
SEX        -0.047    0.95 (0.69-1.3)      0.08    0.77
PROT        -0.17    0.84 (0.57-1.3)      0.71     0.4
B2M         0.069      1.1 (1.1-1.1)        73 1.3e-17
ISOTYPEFLC -0.034    0.97 (0.61-1.5)      0.02    0.88
ISOTYPEIgA 0.0063       1 (0.71-1.4)         0    0.97
ISOTYPEIgD  -0.25    0.78 (0.11-5.6)      0.06    0.81
ISOTYPEIgG  0.019       1 (0.74-1.4)      0.01    0.91
RACE        0.037       1 (0.63-1.7)      0.02    0.89
CRP         0.006            1 (1-1)       3.2   0.072
CREAT        0.23      1.3 (1.2-1.4)        32   2e-08
LDH        0.0057            1 (1-1)        39 4.6e-10
ALB         -0.59   0.56 (0.43-0.71)        21 3.9e-06
HGB         -0.16   0.86 (0.78-0.93)        12 0.00044
ASPC        0.012            1 (1-1)        13 0.00025
BMPC        0.011            1 (1-1)        13 0.00025
MRI         0.014            1 (1-1)       9.6  0.0019
Cyto_Abn     0.82      2.3 (1.7-3.1)        26 3.3e-07</code></pre>
</div>
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generar el archivo LaTeX con la tabla</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>tabla_latex <span class="ot">&lt;-</span> <span class="fu">xtable</span>(res, <span class="at">caption =</span> <span class="st">"Descripción del modelo univariante"</span>, <span class="at">label =</span> <span class="st">"Tabla: Cox Univariante"</span>)</span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardar el archivo LaTeX en un archivo .tex</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tabla_latex, <span class="at">file =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/tabla_cox_univariante.tex"</span>, <span class="at">include.rownames =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="análisis-del-modelo-univariable" class="level4">
<h4 class="anchored" data-anchor-id="análisis-del-modelo-univariable">Análisis del modelo univariable</h4>
<p>El P.valor de las variables de SEX, PROT, CRP y ISOTYPE nos indica que el nivel de sinificancia en el riesgo de muerte no es relevante.</p>
<p>Por otra parte, tenemos otras variables que si contribuyen al riesgo de muerte, como son la AGE, el ASPC, BMPC, MRI, HGB.</p>
<p>Por último, los variables con mayor signifinacia son B2M, CREAT, LDH, ALB y Cyto_Abn.</p>
<p>Aunque la edad aparece con una signifancia “media”, hay que tener en cuenta que la mayoria de los individuos, el 75% de ellos, tienen más de 50 años. Por lo que, en la base de datos, no tenemos suficientes individuos para representar a la población joven.</p>
<p>Realicemos un estudio para determinar cual de las 13 variables consideradas son significativas para construir el modelo.</p>
<p>Realizamos ahora, con las variables significativas, un modelo multivariante</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustar el modelo de Cox</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>mod1 <span class="ot">&lt;-</span> <span class="fu">coxph</span>(<span class="fu">Surv</span>(OS_Time, OS_Censor) <span class="sc">~</span> B2M <span class="sc">+</span> CREAT <span class="sc">+</span> LDH <span class="sc">+</span> ALB <span class="sc">+</span> Cyto_Abn <span class="sc">+</span> AGE <span class="sc">+</span> ASPC <span class="sc">+</span> BMPC <span class="sc">+</span> MRI <span class="sc">+</span> HGB, <span class="at">data =</span> Arkansas)</span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Resumir el modelo</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>mod1_summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(mod1)</span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un dataframe con los coeficientes y otras estadísticas de interés</span></span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>tabla_cox <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">coef =</span> <span class="fu">round</span>(mod1_summary<span class="sc">$</span>coefficients[, <span class="st">"coef"</span>], <span class="dv">5</span>),</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">exp_coef =</span> <span class="fu">round</span>(mod1_summary<span class="sc">$</span>coefficients[, <span class="st">"exp(coef)"</span>], <span class="dv">5</span>),</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">se_coef =</span> <span class="fu">round</span>(mod1_summary<span class="sc">$</span>coefficients[, <span class="st">"se(coef)"</span>], <span class="dv">5</span>),</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">z =</span> <span class="fu">round</span>(mod1_summary<span class="sc">$</span>coefficients[, <span class="st">"z"</span>], <span class="dv">3</span>),</span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_value =</span> mod1_summary<span class="sc">$</span>coefficients[, <span class="st">"Pr(&gt;|z|)"</span>]</span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Cambiar los nombres de las columnas para que sean más comprensibles</span></span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tabla_cox) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Coeficiente Beta"</span>, <span class="st">"Exp(Coef)"</span>, <span class="st">"Error Estándar"</span>, <span class="st">"Z-valor"</span>, <span class="st">"P-valor"</span>)</span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar la tabla generada</span></span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tabla_cox)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         Coeficiente Beta Exp(Coef) Error Estándar Z-valor      P-valor
B2M               0.04497   1.04599        0.01684   2.671 0.0075638104
CREAT            -0.00223   0.99777        0.08064  -0.028 0.9779283560
LDH               0.00400   1.00401        0.00108   3.717 0.0002016106
ALB              -0.41228   0.66214        0.13751  -2.998 0.0027168232
Cyto_Abn          0.59320   1.80977        0.16989   3.492 0.0004798284
AGE               0.01713   1.01727        0.00878   1.951 0.0510688243
ASPC             -0.00231   0.99769        0.00494  -0.467 0.6402239650
BMPC              0.00265   1.00265        0.00469   0.565 0.5718389160
MRI               0.01245   1.01253        0.00475   2.624 0.0086960314
HGB              -0.04053   0.96028        0.05287  -0.767 0.4433349069</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear la tabla y guardarla en un archivo PDF</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">kable</span>(tabla_cox, <span class="at">format =</span> <span class="st">"latex"</span>, <span class="at">booktabs =</span> <span class="cn">TRUE</span>, <span class="at">caption =</span> <span class="st">"Resultados del modelo de Cox"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>(<span class="at">latex_options =</span> <span class="fu">c</span>(<span class="st">"hold_position"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">save_kable</span>(<span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/tabla_cox_multivariante.tex"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Observamos que cuando combinamos las variables más significativas, algunas de obtienen un valor muy elevado, destaca el caso de la CREAT, que obtiene un p-valor muy próximo a 1.</p>
<p>Esto, es debido a la <strong>multicolinealidad</strong>, es dicir, a que hay variables que tienen un alto grado de correlación con otras y el modelo no es capaz de identificar cual de las dos variables es la que es significativa en el modelo.</p>
<p>Para la selección de las variables y evitar la multicolinealidad, usaremos el método de <strong>selección hacia atrás</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustar el modelo inicial con todas las variables</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>modelo_inicial <span class="ot">&lt;-</span> <span class="fu">coxph</span>(<span class="fu">Surv</span>(OS_Time, OS_Censor) <span class="sc">~</span> AGE <span class="sc">+</span> SEX <span class="sc">+</span> PROT <span class="sc">+</span> B2M <span class="sc">+</span> ISOTYPEFLC <span class="sc">+</span> ISOTYPEIgA <span class="sc">+</span> ISOTYPEIgD <span class="sc">+</span> ISOTYPEIgG <span class="sc">+</span> CRP <span class="sc">+</span> CREAT <span class="sc">+</span> LDH <span class="sc">+</span> ALB <span class="sc">+</span> HGB <span class="sc">+</span> ASPC <span class="sc">+</span> BMPC <span class="sc">+</span> MRI <span class="sc">+</span> Cyto_Abn, <span class="at">data =</span> Arkansas_SinDatosFaltantes)</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Aplicar selección hacia atrás</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>modelo_backward <span class="ot">&lt;-</span> <span class="fu">step</span>(modelo_inicial, <span class="at">direction =</span> <span class="st">"backward"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=1717.11
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEFLC + 
    ISOTYPEIgA + ISOTYPEIgD + ISOTYPEIgG + CRP + CREAT + LDH + 
    ALB + HGB + ASPC + BMPC + MRI + Cyto_Abn


Step:  AIC=1717.11
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEFLC + 
    ISOTYPEIgA + ISOTYPEIgD + CRP + CREAT + LDH + ALB + HGB + 
    ASPC + BMPC + MRI + Cyto_Abn

             Df    AIC
- ISOTYPEIgD  1 1715.1
- CREAT       1 1715.1
- ISOTYPEIgA  1 1715.2
- CRP         1 1715.2
- PROT        1 1715.2
- SEX         1 1715.2
- ASPC        1 1715.4
- BMPC        1 1715.5
- HGB         1 1715.6
- ISOTYPEFLC  1 1716.8
&lt;none&gt;          1717.1
- AGE         1 1718.4
- ALB         1 1720.1
- MRI         1 1721.9
- B2M         1 1723.7
- Cyto_Abn    1 1724.9
- LDH         1 1727.9

Step:  AIC=1715.12
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEFLC + 
    ISOTYPEIgA + CRP + CREAT + LDH + ALB + HGB + ASPC + BMPC + 
    MRI + Cyto_Abn

             Df    AIC
- CREAT       1 1713.2
- CRP         1 1713.2
- ISOTYPEIgA  1 1713.2
- PROT        1 1713.2
- SEX         1 1713.2
- ASPC        1 1713.4
- BMPC        1 1713.5
- HGB         1 1713.6
- ISOTYPEFLC  1 1714.8
&lt;none&gt;          1715.1
- AGE         1 1716.4
- ALB         1 1718.1
- MRI         1 1719.9
- B2M         1 1721.7
- Cyto_Abn    1 1723.0
- LDH         1 1725.9

Step:  AIC=1713.15
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEFLC + 
    ISOTYPEIgA + CRP + LDH + ALB + HGB + ASPC + BMPC + MRI + 
    Cyto_Abn

             Df    AIC
- CRP         1 1711.2
- ISOTYPEIgA  1 1711.2
- PROT        1 1711.2
- SEX         1 1711.2
- ASPC        1 1711.5
- BMPC        1 1711.5
- HGB         1 1711.6
- ISOTYPEFLC  1 1712.8
&lt;none&gt;          1713.2
- AGE         1 1714.5
- ALB         1 1716.2
- MRI         1 1717.9
- Cyto_Abn    1 1721.1
- LDH         1 1723.9
- B2M         1 1727.1

Step:  AIC=1711.2
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEFLC + 
    ISOTYPEIgA + LDH + ALB + HGB + ASPC + BMPC + MRI + Cyto_Abn

             Df    AIC
- ISOTYPEIgA  1 1709.3
- PROT        1 1709.3
- SEX         1 1709.3
- ASPC        1 1709.5
- BMPC        1 1709.6
- HGB         1 1709.6
- ISOTYPEFLC  1 1710.8
&lt;none&gt;          1711.2
- AGE         1 1712.6
- ALB         1 1714.3
- MRI         1 1715.9
- Cyto_Abn    1 1719.1
- LDH         1 1722.0
- B2M         1 1725.2

Step:  AIC=1709.26
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEFLC + 
    LDH + ALB + HGB + ASPC + BMPC + MRI + Cyto_Abn

             Df    AIC
- SEX         1 1707.3
- PROT        1 1707.3
- ASPC        1 1707.5
- BMPC        1 1707.7
- HGB         1 1707.7
- ISOTYPEFLC  1 1709.2
&lt;none&gt;          1709.3
- AGE         1 1710.6
- ALB         1 1712.4
- MRI         1 1714.2
- Cyto_Abn    1 1717.1
- LDH         1 1720.0
- B2M         1 1723.4

Step:  AIC=1707.32
Surv(OS_Time, OS_Censor) ~ AGE + PROT + B2M + ISOTYPEFLC + LDH + 
    ALB + HGB + ASPC + BMPC + MRI + Cyto_Abn

             Df    AIC
- PROT        1 1705.4
- ASPC        1 1705.6
- BMPC        1 1705.7
- HGB         1 1705.7
&lt;none&gt;          1707.3
- ISOTYPEFLC  1 1707.4
- AGE         1 1708.6
- ALB         1 1710.5
- MRI         1 1712.7
- Cyto_Abn    1 1715.4
- LDH         1 1718.0
- B2M         1 1721.4

Step:  AIC=1705.39
Surv(OS_Time, OS_Censor) ~ AGE + B2M + ISOTYPEFLC + LDH + ALB + 
    HGB + ASPC + BMPC + MRI + Cyto_Abn

             Df    AIC
- ASPC        1 1703.6
- BMPC        1 1703.8
- HGB         1 1703.8
&lt;none&gt;          1705.4
- ISOTYPEFLC  1 1705.5
- AGE         1 1706.7
- ALB         1 1708.6
- MRI         1 1710.7
- Cyto_Abn    1 1713.4
- LDH         1 1716.5
- B2M         1 1719.6

Step:  AIC=1703.64
Surv(OS_Time, OS_Censor) ~ AGE + B2M + ISOTYPEFLC + LDH + ALB + 
    HGB + BMPC + MRI + Cyto_Abn

             Df    AIC
- BMPC        1 1701.8
- HGB         1 1702.0
&lt;none&gt;          1703.6
- ISOTYPEFLC  1 1703.7
- AGE         1 1704.8
- ALB         1 1706.8
- MRI         1 1709.0
- Cyto_Abn    1 1711.4
- LDH         1 1714.6
- B2M         1 1717.7

Step:  AIC=1701.78
Surv(OS_Time, OS_Censor) ~ AGE + B2M + ISOTYPEFLC + LDH + ALB + 
    HGB + MRI + Cyto_Abn

             Df    AIC
- HGB         1 1700.3
&lt;none&gt;          1701.8
- ISOTYPEFLC  1 1702.0
- AGE         1 1703.0
- ALB         1 1705.0
- MRI         1 1707.1
- Cyto_Abn    1 1710.2
- LDH         1 1713.1
- B2M         1 1717.0

Step:  AIC=1700.27
Surv(OS_Time, OS_Censor) ~ AGE + B2M + ISOTYPEFLC + LDH + ALB + 
    MRI + Cyto_Abn

             Df    AIC
&lt;none&gt;          1700.3
- ISOTYPEFLC  1 1700.6
- AGE         1 1701.3
- ALB         1 1705.2
- MRI         1 1705.3
- Cyto_Abn    1 1708.7
- LDH         1 1712.0
- B2M         1 1717.4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Resumir el modelo final ajustado</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>modelo_backward_summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(modelo_backward)</span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(modelo_backward_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = Surv(OS_Time, OS_Censor) ~ AGE + B2M + ISOTYPEFLC + 
    LDH + ALB + MRI + Cyto_Abn, data = Arkansas_SinDatosFaltantes)

  n= 467, number of events= 156 

                coef exp(coef)  se(coef)      z Pr(&gt;|z|)    
AGE         0.015161  1.015276  0.008732  1.736  0.08254 .  
B2M         0.052499  1.053902  0.010700  4.906 9.27e-07 ***
ISOTYPEFLC -0.427669  0.652028  0.290049 -1.474  0.14035    
LDH         0.004279  1.004288  0.001077  3.973 7.09e-05 ***
ALB        -0.359426  0.698077  0.134855 -2.665  0.00769 ** 
MRI         0.013373  1.013463  0.004822  2.773  0.00555 ** 
Cyto_Abn    0.547436  1.728815  0.169374  3.232  0.00123 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

           exp(coef) exp(-coef) lower .95 upper .95
AGE           1.0153     0.9850    0.9980    1.0328
B2M           1.0539     0.9489    1.0320    1.0762
ISOTYPEFLC    0.6520     1.5337    0.3693    1.1512
LDH           1.0043     0.9957    1.0022    1.0064
ALB           0.6981     1.4325    0.5359    0.9093
MRI           1.0135     0.9867    1.0039    1.0231
Cyto_Abn      1.7288     0.5784    1.2404    2.4095

Concordance= 0.728  (se = 0.02 )
Likelihood ratio test= 94.98  on 7 df,   p=&lt;2e-16
Wald test            = 118.8  on 7 df,   p=&lt;2e-16
Score (logrank) test = 138.2  on 7 df,   p=&lt;2e-16</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un dataframe con los coeficientes y estadísticas del modelo ajustado</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>tabla_backward <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">coef =</span> <span class="fu">formatC</span>(modelo_backward_summary<span class="sc">$</span>coefficients[, <span class="st">"coef"</span>], <span class="dv">5</span>),</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">exp_coef =</span> <span class="fu">formatC</span>(modelo_backward_summary<span class="sc">$</span>coefficients[, <span class="st">"exp(coef)"</span>], <span class="at">format =</span> <span class="st">"g"</span>, <span class="at">digits =</span> <span class="dv">5</span>),</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">se_coef =</span> <span class="fu">formatC</span>(modelo_backward_summary<span class="sc">$</span>coefficients[, <span class="st">"se(coef)"</span>], <span class="at">format =</span> <span class="st">"g"</span>, <span class="at">digits =</span> <span class="dv">5</span>),</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">z =</span> <span class="fu">formatC</span>(modelo_backward_summary<span class="sc">$</span>coefficients[, <span class="st">"z"</span>], <span class="at">format =</span> <span class="st">"g"</span>, <span class="at">digits =</span> <span class="dv">5</span>),</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">p_value =</span> <span class="fu">formatC</span>(modelo_backward_summary<span class="sc">$</span>coefficients[, <span class="st">"Pr(&gt;|z|)"</span>], <span class="at">format =</span> <span class="st">"g"</span>, <span class="at">digits =</span> <span class="dv">2</span>  )</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Renombrar las columnas para mayor claridad</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(tabla_backward) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Coeficiente"</span>, <span class="st">"Exp(Coef)"</span>, <span class="st">"Error Estándar"</span>, <span class="st">"Z-valor"</span>, <span class="st">"P-valor"</span>)</span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar la tabla generada</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tabla_backward)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>           Coeficiente Exp(Coef) Error Estándar Z-valor P-valor
AGE           0.015161    1.0153      0.0087324  1.7362   0.083
B2M           0.052499    1.0539         0.0107  4.9065 9.3e-07
ISOTYPEFLC    -0.42767   0.65203        0.29005 -1.4745    0.14
LDH          0.0042789    1.0043      0.0010769  3.9734 7.1e-05
ALB           -0.35943   0.69808        0.13485 -2.6653  0.0077
MRI           0.013373    1.0135      0.0048225   2.773  0.0056
Cyto_Abn       0.54744    1.7288        0.16937  3.2321  0.0012</code></pre>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convertir la tabla a formato LaTeX</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>tabla_latex <span class="ot">&lt;-</span> <span class="fu">xtable</span>(tabla_backward, <span class="at">caption =</span> <span class="st">"Resultados del modelo final después de selección hacia atrás"</span>)</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardar la tabla en un archivo .tex para Overleaf</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(tabla_latex, <span class="at">file =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/tabla_cox_backward.tex"</span>, <span class="at">include.rownames =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>modelo_backward <span class="ot">&lt;-</span> <span class="fu">update</span>(modelo_backward, . <span class="sc">~</span> . <span class="sc">-</span> ISOTYPEFLC) <span class="co"># Eliminamos la variable del modelo</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggforest</span>(modelo_backward, <span class="at">data =</span> Arkansas_SinDatosFaltantes, <span class="at">main =</span> <span class="st">"Forest Plot"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>ANÁLISIS DEL MÓDELO “FINAL”</p>
<p>age: El coeficiente es positivo (0.016140), lo que sugiere que un aumento en la edad incrementa ligeramente el riesgo, pero el valor p (0.063447) indica que el efecto es marginalmente significativo (cercano a 0.05, pero no lo suficiente). B2M: Tiene un coeficiente positivo (0.045930), lo que indica que el aumento en B2M incrementa el riesgo de manera significativa (p = 2.81e-06). Su HR es 1.047, lo que significa que por cada unidad adicional en B2M, el riesgo aumenta en un 4.7%. LDH: También tiene un coeficiente positivo y es altamente significativo (p = 0.000197). Un aumento en LDH incrementa el riesgo, aunque en menor magnitud, un 0.04% (HR = 1.004). ALB: El coeficiente es negativo (-0.438302), lo que significa que un aumento en la albúmina disminuye el riesgo. Es un efecto significativo (p = 0.000637) y el HR de 0.645131 indica una reducción del 35.49% en el riesgo por cada unidad adicional de albúmina. MRI: Tiene un coeficiente positivo y significativo (p = 0.013479), indicando que un aumento en los valores de MRI incrementa el riesgo (HR = 1.011635). Cyto_Abn: Tiene un coeficiente positivo (0.604041), lo que indica que la presencia de anomalías citogenéticas aumenta significativamente el riesgo (p = 0.000283), con un HR de 1.829496, es decir, el riesgo se incrementa en un 82.95%.</p>
<p>GRÁFICO QUE MUESTRA COMO SE VAN ELIMINANDO LAS VARIABLES</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear manualmente el data frame con las variables y las iteraciones</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>variables <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"PROT"</span>,<span class="st">"Age"</span>, <span class="st">"Sex"</span>, <span class="st">"B2M"</span>, <span class="st">"CRP"</span>, <span class="st">"CREAT"</span>, <span class="st">"LDH"</span>, <span class="st">"ALB"</span>, <span class="st">"HGB"</span>, <span class="st">"ASPC"</span>, <span class="st">"BMPC"</span>, <span class="st">"MRI"</span>, <span class="st">"Cyto_Abn"</span>)</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Asignar en qué iteración fue eliminada cada variable (0 si no fue eliminada)</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>eliminadas_iteracion <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">0</span>, <span class="dv">4</span>, <span class="dv">0</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">8</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el data frame con las variables y las iteraciones de eliminación</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Variable =</span> variables, <span class="at">Iteracion_Eliminada =</span> eliminadas_iteracion)</span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Máximo número de iteraciones (ajusta según tu caso)</span></span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>max_iter <span class="ot">&lt;-</span> <span class="dv">8</span></span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un nuevo data frame para indicar presencia (1) o eliminación (0)</span></span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a>iteraciones_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Variable =</span> <span class="fu">rep</span>(variables, <span class="at">each =</span> max_iter),</span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Iteracion =</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span>max_iter, <span class="at">times =</span> <span class="fu">length</span>(variables)),</span>
<span id="cb76-16"><a href="#cb76-16" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Status =</span> <span class="dv">1</span>)</span>
<span id="cb76-17"><a href="#cb76-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-18"><a href="#cb76-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Modificar el status a 0 cuando la variable fue eliminada</span></span>
<span id="cb76-19"><a href="#cb76-19" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(df)) {</span>
<span id="cb76-20"><a href="#cb76-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (df<span class="sc">$</span>Iteracion_Eliminada[i] <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb76-21"><a href="#cb76-21" aria-hidden="true" tabindex="-1"></a>    iteraciones_df<span class="sc">$</span>Status[iteraciones_df<span class="sc">$</span>Variable <span class="sc">==</span> df<span class="sc">$</span>Variableble[i] <span class="sc">&amp;</span> </span>
<span id="cb76-22"><a href="#cb76-22" aria-hidden="true" tabindex="-1"></a>                          iteraciones_df<span class="sc">$</span>Iteracion <span class="sc">&gt;=</span> df<span class="sc">$</span>Iteracion_Eliminada[i]] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb76-23"><a href="#cb76-23" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb76-24"><a href="#cb76-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb76-25"><a href="#cb76-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-26"><a href="#cb76-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Filtrar sólo las filas donde la variable aún está presente (Status == 1)</span></span>
<span id="cb76-27"><a href="#cb76-27" aria-hidden="true" tabindex="-1"></a>iteraciones_df <span class="ot">&lt;-</span> iteraciones_df[iteraciones_df<span class="sc">$</span>Status <span class="sc">==</span> <span class="dv">1</span>, ]</span>
<span id="cb76-28"><a href="#cb76-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-29"><a href="#cb76-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el gráfico con líneas horizontales para cada variable</span></span>
<span id="cb76-30"><a href="#cb76-30" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iteraciones_df, <span class="fu">aes</span>(<span class="at">x =</span> Iteracion, <span class="at">y =</span> Variable)) <span class="sc">+</span></span>
<span id="cb76-31"><a href="#cb76-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">group =</span> Variable), <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span>  <span class="co"># Colorear cada variable de forma distinta</span></span>
<span id="cb76-32"><a href="#cb76-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Proceso de eliminación de variables manual"</span>,</span>
<span id="cb76-33"><a href="#cb76-33" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Iteraciones"</span>, </span>
<span id="cb76-34"><a href="#cb76-34" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Variables"</span>) <span class="sc">+</span></span>
<span id="cb76-35"><a href="#cb76-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, max_iter, <span class="at">by =</span> <span class="dv">1</span>)) <span class="sc">+</span> </span>
<span id="cb76-36"><a href="#cb76-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb76-37"><a href="#cb76-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)  <span class="co"># Eliminar leyenda si no es necesaria</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Gráfico del modelo de Cox</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>curva_supervivencia <span class="ot">&lt;-</span> <span class="fu">survfit</span>(modelo_backward)</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Graficar las curvas</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggsurvplot</span>(curva_supervivencia, <span class="at">data =</span> Arkansas, </span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>             <span class="at">conf.int =</span> <span class="cn">TRUE</span>,          <span class="co"># Añadir intervalo de confianza</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">pval =</span> <span class="cn">TRUE</span>,              <span class="co"># Mostrar valor p</span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">risk.table =</span> <span class="cn">TRUE</span>,        <span class="co"># Mostrar tabla de riesgos</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>             <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>(),<span class="co"># Tema estético</span></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>             <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"#E69F00"</span>, <span class="st">"#56B4E9"</span>))  <span class="co"># Colores personalizables</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in .pvalue(fit, data = data, method = method, pval = pval, pval.coord = pval.coord, : There are no survival curves to be compared. 
 This is a null model.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="gráficos-kaplan-meier" class="level1">
<h1>Gráficos Kaplan-Meier</h1>
<section id="preparación-de-los-datos" class="level2">
<h2 class="anchored" data-anchor-id="preparación-de-los-datos">Preparación de los datos</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar la librería dplyr</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Dataset transformado con nuevas columnas que indican si están en el rango (0) o fuera del rango (1)</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>datosEstratificados <span class="ot">&lt;-</span> Arkansas <span class="sc">%&gt;%</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">AGE_flag =</span> <span class="fu">ifelse</span>(AGE <span class="sc">&lt;=</span> <span class="dv">50</span>, <span class="dv">0</span>, <span class="dv">1</span>),  </span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">B2M_flag =</span> <span class="fu">ifelse</span>(B2M <span class="sc">&lt;=</span> <span class="fl">2.7</span>, <span class="dv">0</span>, <span class="dv">1</span>),  </span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">CREAT_flag =</span> <span class="fu">ifelse</span>(SEX <span class="sc">==</span> <span class="st">"male"</span> <span class="sc">&amp;</span> CREAT <span class="sc">&gt;=</span> <span class="fl">0.74</span> <span class="sc">&amp;</span> CREAT <span class="sc">&lt;=</span> <span class="fl">1.35</span>, <span class="dv">0</span>, </span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">ifelse</span>(SEX <span class="sc">==</span> <span class="st">"female"</span> <span class="sc">&amp;</span> CREAT <span class="sc">&gt;=</span> <span class="fl">0.54</span> <span class="sc">&amp;</span> CREAT <span class="sc">&lt;=</span> <span class="fl">1.04</span>, <span class="dv">0</span>, <span class="dv">1</span>)),</span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">LDH_flag =</span> <span class="fu">ifelse</span>(LDH <span class="sc">&gt;=</span> <span class="dv">122</span> <span class="sc">&amp;</span> LDH <span class="sc">&lt;=</span> <span class="dv">222</span>, <span class="dv">0</span>, <span class="dv">1</span>),  </span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">ALB_flag =</span> <span class="fu">ifelse</span>(ALB <span class="sc">&gt;=</span> <span class="fl">3.5</span> <span class="sc">&amp;</span> ALB <span class="sc">&lt;=</span> <span class="dv">5</span>, <span class="dv">0</span>, <span class="dv">1</span>),     </span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Para MRI no hay niveles normales, lo dividimos por quantiles</span></span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">MRI_flag =</span> <span class="fu">ifelse</span>(MRI <span class="sc">&lt;=</span> <span class="fu">quantile</span>(<span class="fu">na.omit</span>(Arkansas<span class="sc">$</span>MRI), <span class="fl">0.25</span>),<span class="dv">0</span>,</span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>                      <span class="fu">ifelse</span>(MRI <span class="sc">&gt;=</span> <span class="fu">quantile</span>(<span class="fu">na.omit</span>(Arkansas<span class="sc">$</span>MRI), <span class="fl">0.25</span>) <span class="sc">&amp;</span> MRI <span class="sc">&lt;=</span> <span class="fu">quantile</span>(<span class="fu">na.omit</span>(Arkansas<span class="sc">$</span>MRI), <span class="fl">0.75</span>),<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar las primeras filas del nuevo dataset</span></span>
<span id="cb79-19"><a href="#cb79-19" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(datosEstratificados, <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 × 39
   `original order` PATID PROT  SEX    RACE  ISOTYPE       AGE   B2M   CRP CREAT
              &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1                1  8241 TT2   female white IgG          53.4   1.8   8.6   0.6
 2                2  9843 TT2   female white IgG          52.7   1.7   8.9   0.6
 3                3  9888 TT2   male   white Nonsecreto…  62.0   5.5   4.5   0.8
 4                4  9835 TT2   male   white IgA          60.3   2.8   9.9   1  
 5                5  9997 TT2   male   white IgG          66.9   4     2.6   1.2
 6                6  9992 TT2   female white IgA          55.3   2.9   2.1   1  
 7                7 10003 TT2   male   white FLC          57.1   3.1  32.5   0.7
 8                8 10021 TT2   male   other IgG          55.9   1.7   8.6   0.8
 9                9  9983 TT2   male   white IgG          54.5   2.5   0.2   1.1
10               10 10107 TT2   male   white IgA          59.7   3.3   1.8   1  
# ℹ 20 more rows
# ℹ 29 more variables: LDH &lt;dbl&gt;, ALB &lt;dbl&gt;, HGB &lt;dbl&gt;, ASPC &lt;dbl&gt;, BMPC &lt;dbl&gt;,
#   MRI &lt;dbl&gt;, Cyto_Abn &lt;dbl&gt;, CPS1 &lt;dbl&gt;, CPR1 &lt;dbl&gt;, EFS_Censor &lt;dbl&gt;,
#   EFS_Time &lt;dbl&gt;, OS_Censor &lt;dbl&gt;, OS_Time &lt;dbl&gt;, AGE_flag &lt;dbl&gt;,
#   B2M_flag &lt;dbl&gt;, CREAT_flag &lt;dbl&gt;, CRP_flag &lt;dbl&gt;, LDH_flag &lt;dbl&gt;,
#   ALB_flag &lt;dbl&gt;, MRI_flag &lt;dbl&gt;, HGB_flag &lt;dbl&gt;, Estado &lt;chr&gt;,
#   Estado_hombres &lt;chr&gt;, Estado_mujeres &lt;chr&gt;, Estado_CRP &lt;chr&gt;, …</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el gráfico de supervivencia</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>grafico_surv_age <span class="ot">&lt;-</span> <span class="fu">ggsurvplot</span>(</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survfit</span>(<span class="fu">Surv</span>(OS_Time, OS_Censor) <span class="sc">~</span> AGE_flag, <span class="at">data =</span> Arkansas_SinDatosFaltantes), </span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> Arkansas_SinDatosFaltantes, </span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"#0072B2"</span>, <span class="st">"#D95F02"</span>, <span class="st">"#F0E442"</span>, <span class="st">"#999999"</span>),  <span class="co"># Define la paleta de colores</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.labs =</span> <span class="fu">c</span>(<span class="st">"Jóvenes (&lt;50)"</span>, <span class="st">"Adultos (&gt;50)"</span>),  <span class="co"># Texto de la leyenda</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">"Tiempo (meses)"</span>,  <span class="co"># Cambiar texto del eje X</span></span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">"Probabilidad de supervivencia (%)"</span>,<span class="co"># Cambiar texto del eje Y</span></span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Edad"</span></span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a>grafico_surv_age <span class="ot">&lt;-</span> grafico_surv_age<span class="sc">$</span>plot <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>)) <span class="co"># Para ajustar el título en el centro</span></span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"></a>grafico_surv_B2M <span class="ot">&lt;-</span> <span class="fu">ggsurvplot</span>(</span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survfit</span>(<span class="fu">Surv</span>(OS_Time, OS_Censor) <span class="sc">~</span> B2M_flag, <span class="at">data =</span> Arkansas_SinDatosFaltantes), </span>
<span id="cb81-17"><a href="#cb81-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> Arkansas_SinDatosFaltantes, </span>
<span id="cb81-18"><a href="#cb81-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb81-19"><a href="#cb81-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"#0072B2"</span>, <span class="st">"#D95F02"</span>, <span class="st">"#F0E442"</span>, <span class="st">"#999999"</span>),  <span class="co"># Define la paleta de colores</span></span>
<span id="cb81-20"><a href="#cb81-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.labs =</span> <span class="fu">c</span>(<span class="st">"Niveles nomales"</span>, <span class="st">"Niveles alterados"</span>),  <span class="co"># Texto de la leyenda</span></span>
<span id="cb81-21"><a href="#cb81-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">"Tiempo (meses)"</span>,  <span class="co"># Cambiar texto del eje X</span></span>
<span id="cb81-22"><a href="#cb81-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">"Probabilidad de supervivencia (%)"</span>,  <span class="co"># Cambiar texto del eje Y</span></span>
<span id="cb81-23"><a href="#cb81-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"B2M"</span></span>
<span id="cb81-24"><a href="#cb81-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-25"><a href="#cb81-25" aria-hidden="true" tabindex="-1"></a>grafico_surv_B2M <span class="ot">&lt;-</span> grafico_surv_B2M<span class="sc">$</span>plot <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>)) <span class="co"># Para ajustar el título en el centro</span></span>
<span id="cb81-26"><a href="#cb81-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-27"><a href="#cb81-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-28"><a href="#cb81-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-29"><a href="#cb81-29" aria-hidden="true" tabindex="-1"></a>grafico_surv_ALB <span class="ot">&lt;-</span> <span class="fu">ggsurvplot</span>(</span>
<span id="cb81-30"><a href="#cb81-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survfit</span>(<span class="fu">Surv</span>(OS_Time, OS_Censor) <span class="sc">~</span> ALB_flag, <span class="at">data =</span> Arkansas_SinDatosFaltantes), </span>
<span id="cb81-31"><a href="#cb81-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> Arkansas_SinDatosFaltantes, </span>
<span id="cb81-32"><a href="#cb81-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb81-33"><a href="#cb81-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"#0072B2"</span>, <span class="st">"#D95F02"</span>, <span class="st">"#F0E442"</span>, <span class="st">"#999999"</span>),  <span class="co"># Define la paleta de colores</span></span>
<span id="cb81-34"><a href="#cb81-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.labs =</span> <span class="fu">c</span>(<span class="st">"Niveles nomales"</span>, <span class="st">"Niveles alterados"</span>),  <span class="co"># Texto de la leyenda</span></span>
<span id="cb81-35"><a href="#cb81-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">"Tiempo (meses)"</span>,  <span class="co"># Cambiar texto del eje X</span></span>
<span id="cb81-36"><a href="#cb81-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">"Probabilidad de supervivencia (%)"</span>,  <span class="co"># Cambiar texto del eje Y</span></span>
<span id="cb81-37"><a href="#cb81-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"ALB"</span></span>
<span id="cb81-38"><a href="#cb81-38" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb81-39"><a href="#cb81-39" aria-hidden="true" tabindex="-1"></a>grafico_surv_ALB <span class="ot">&lt;-</span> grafico_surv_ALB<span class="sc">$</span>plot <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>)) <span class="co"># Para ajustar el título en el centro</span></span>
<span id="cb81-40"><a href="#cb81-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-41"><a href="#cb81-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-42"><a href="#cb81-42" aria-hidden="true" tabindex="-1"></a>grafico_surv_LDH <span class="ot">&lt;-</span> <span class="fu">ggsurvplot</span>(</span>
<span id="cb81-43"><a href="#cb81-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survfit</span>(<span class="fu">Surv</span>(OS_Time, OS_Censor) <span class="sc">~</span> LDH_flag, <span class="at">data =</span> Arkansas_SinDatosFaltantes), </span>
<span id="cb81-44"><a href="#cb81-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> Arkansas_SinDatosFaltantes, </span>
<span id="cb81-45"><a href="#cb81-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb81-46"><a href="#cb81-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"#0072B2"</span>, <span class="st">"#D95F02"</span>, <span class="st">"#F0E442"</span>, <span class="st">"#999999"</span>),  <span class="co"># Define la paleta de colores</span></span>
<span id="cb81-47"><a href="#cb81-47" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.labs =</span> <span class="fu">c</span>(<span class="st">"Niveles nomales"</span>, <span class="st">"Niveles alterados"</span>),  <span class="co"># Texto de la leyenda</span></span>
<span id="cb81-48"><a href="#cb81-48" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">"Tiempo (meses)"</span>,  <span class="co"># Cambiar texto del eje X</span></span>
<span id="cb81-49"><a href="#cb81-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">"Probabilidad de supervivencia (%)"</span>,  <span class="co"># Cambiar texto del eje Y</span></span>
<span id="cb81-50"><a href="#cb81-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"LDH"</span></span>
<span id="cb81-51"><a href="#cb81-51" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-52"><a href="#cb81-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-53"><a href="#cb81-53" aria-hidden="true" tabindex="-1"></a>grafico_surv_LDH <span class="ot">&lt;-</span> grafico_surv_LDH<span class="sc">$</span>plot <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>)) <span class="co"># Para ajustar el título en el centro</span></span>
<span id="cb81-54"><a href="#cb81-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-55"><a href="#cb81-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-56"><a href="#cb81-56" aria-hidden="true" tabindex="-1"></a>grafico_surv_MRI <span class="ot">&lt;-</span> <span class="fu">ggsurvplot</span>(</span>
<span id="cb81-57"><a href="#cb81-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survfit</span>(<span class="fu">Surv</span>(OS_Time, OS_Censor) <span class="sc">~</span> MRI_flag, <span class="at">data =</span> Arkansas_SinDatosFaltantes), </span>
<span id="cb81-58"><a href="#cb81-58" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> Arkansas_SinDatosFaltantes, </span>
<span id="cb81-59"><a href="#cb81-59" aria-hidden="true" tabindex="-1"></a>  <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb81-60"><a href="#cb81-60" aria-hidden="true" tabindex="-1"></a>  <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"#0072B2"</span>, <span class="st">"#D95F02"</span>, <span class="st">"#F0E442"</span>, <span class="st">"#999999"</span>),  <span class="co"># Define la paleta de colores</span></span>
<span id="cb81-61"><a href="#cb81-61" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.labs =</span> <span class="fu">c</span>(<span class="st">"Niveles bajos"</span>, <span class="st">"Niveles medios"</span>, <span class="st">"Niveles altos"</span>,<span class="st">"Niveles muy altos"</span>),  <span class="co"># Texto de la leyenda</span></span>
<span id="cb81-62"><a href="#cb81-62" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">"Tiempo (meses)"</span>,  <span class="co"># Cambiar texto del eje X</span></span>
<span id="cb81-63"><a href="#cb81-63" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">"Probabilidad de supervivencia (%)"</span>,  <span class="co"># Cambiar texto del eje Y</span></span>
<span id="cb81-64"><a href="#cb81-64" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"MRI"</span></span>
<span id="cb81-65"><a href="#cb81-65" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-66"><a href="#cb81-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-67"><a href="#cb81-67" aria-hidden="true" tabindex="-1"></a>grafico_surv_MRI <span class="ot">&lt;-</span> grafico_surv_MRI<span class="sc">$</span>plot <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>)) <span class="co"># Para ajustar el título en el centro</span></span>
<span id="cb81-68"><a href="#cb81-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-69"><a href="#cb81-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-70"><a href="#cb81-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-71"><a href="#cb81-71" aria-hidden="true" tabindex="-1"></a>grafico_surv_CYTO <span class="ot">&lt;-</span> <span class="fu">ggsurvplot</span>(</span>
<span id="cb81-72"><a href="#cb81-72" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survfit</span>(<span class="fu">Surv</span>(OS_Time, OS_Censor) <span class="sc">~</span> Cyto_Abn, <span class="at">data =</span> Arkansas_SinDatosFaltantes), </span>
<span id="cb81-73"><a href="#cb81-73" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> Arkansas_SinDatosFaltantes, </span>
<span id="cb81-74"><a href="#cb81-74" aria-hidden="true" tabindex="-1"></a>  <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb81-75"><a href="#cb81-75" aria-hidden="true" tabindex="-1"></a>  <span class="at">palette =</span> <span class="fu">c</span>(<span class="st">"#0072B2"</span>, <span class="st">"#D95F02"</span>, <span class="st">"#F0E442"</span>, <span class="st">"#999999"</span>),  <span class="co"># Define la paleta de colores</span></span>
<span id="cb81-76"><a href="#cb81-76" aria-hidden="true" tabindex="-1"></a>  <span class="at">legend.labs =</span> <span class="fu">c</span>(<span class="st">"Sin alteraciones"</span>, <span class="st">"Con alteraciones"</span>),  <span class="co"># Texto de la leyenda</span></span>
<span id="cb81-77"><a href="#cb81-77" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">"Tiempo (meses)"</span>,  <span class="co"># Cambiar texto del eje X</span></span>
<span id="cb81-78"><a href="#cb81-78" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">"Probabilidad de supervivencia (%)"</span>,  <span class="co"># Cambiar texto del eje Y</span></span>
<span id="cb81-79"><a href="#cb81-79" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Cyto_Abn"</span></span>
<span id="cb81-80"><a href="#cb81-80" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb81-81"><a href="#cb81-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-82"><a href="#cb81-82" aria-hidden="true" tabindex="-1"></a>grafico_surv_CYTO <span class="ot">&lt;-</span> grafico_surv_CYTO<span class="sc">$</span>plot <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>)) <span class="co"># Para ajustar el título en el centro</span></span>
<span id="cb81-83"><a href="#cb81-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-84"><a href="#cb81-84" aria-hidden="true" tabindex="-1"></a>grafico_surv_age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>grafico_surv_B2M</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-34-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>grafico_surv_ALB</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-34-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>grafico_surv_MRI</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-34-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>grafico_surv_LDH</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-34-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>grafico_surv_CYTO</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-34-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Guardar los gráficos en archivos PDF</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Survival_graphs/grafico_surv_age.pdf"</span>, <span class="at">plot =</span> grafico_surv_age, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Survival_graphs/grafico_surv_B2M.pdf"</span>, <span class="at">plot =</span> grafico_surv_B2M, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Survival_graphs/grafico_surv_ALB.pdf"</span>, <span class="at">plot =</span> grafico_surv_ALB, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Survival_graphs/grafico_surv_MRI.pdf"</span>, <span class="at">plot =</span> grafico_surv_MRI, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Survival_graphs/grafico_surv_LDH.pdf"</span>, <span class="at">plot =</span> grafico_surv_LDH, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"/Users/marc/Downloads/TFG/R/TFGMarcArrom/Output/Graphs_tables/Survival_graphs/grafico_surv_CYTO.pdf"</span>, <span class="at">plot =</span> grafico_surv_CYTO, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">height =</span> <span class="dv">7</span>, <span class="at">device =</span> <span class="st">"pdf"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustar modelos paramétricos con distintas distribuciones</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>modelo_exp <span class="ot">&lt;-</span> <span class="fu">survreg</span>(<span class="fu">Surv</span>(OS_Time, OS_Censor) <span class="sc">~</span> AGE <span class="sc">+</span> SEX <span class="sc">+</span> PROT <span class="sc">+</span> B2M <span class="sc">+</span> ISOTYPEFLC <span class="sc">+</span> </span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>                      ISOTYPEIgA <span class="sc">+</span> ISOTYPEIgD <span class="sc">+</span> ISOTYPEIgG <span class="sc">+</span> CRP <span class="sc">+</span> CREAT <span class="sc">+</span> LDH <span class="sc">+</span> ALB <span class="sc">+</span> </span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>                      HGB <span class="sc">+</span> ASPC <span class="sc">+</span> BMPC <span class="sc">+</span> MRI <span class="sc">+</span> Cyto_Abn, <span class="at">data =</span> Arkansas_SinDatosFaltantes, <span class="at">dist =</span> <span class="st">"exponential"</span>)</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>modelo_exp_backward <span class="ot">&lt;-</span> <span class="fu">step</span>(modelo_exp, <span class="at">direction =</span> <span class="st">"backward"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=1814.42
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEFLC + 
    ISOTYPEIgA + ISOTYPEIgD + ISOTYPEIgG + CRP + CREAT + LDH + 
    ALB + HGB + ASPC + BMPC + MRI + Cyto_Abn

             Df    AIC
- ISOTYPEFLC  1 1812.4
- ISOTYPEIgA  1 1812.4
- ISOTYPEIgD  1 1812.4
- ISOTYPEIgG  1 1812.4
- CRP         1 1812.5
- CREAT       1 1812.5
- SEX         1 1812.5
- ASPC        1 1812.7
- HGB         1 1812.9
- BMPC        1 1812.9
- PROT        1 1813.3
&lt;none&gt;          1814.4
- AGE         1 1815.5
- ALB         1 1817.1
- MRI         1 1819.1
- B2M         1 1820.5
- Cyto_Abn    1 1821.9
- LDH         1 1824.4

Step:  AIC=1812.42
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEIgA + 
    ISOTYPEIgD + ISOTYPEIgG + CRP + CREAT + LDH + ALB + HGB + 
    ASPC + BMPC + MRI + Cyto_Abn

             Df    AIC
- CRP         1 1810.5
- ISOTYPEIgD  1 1810.5
- CREAT       1 1810.5
- SEX         1 1810.5
- ASPC        1 1810.7
- HGB         1 1810.9
- BMPC        1 1810.9
- PROT        1 1811.3
- ISOTYPEIgG  1 1812.0
- ISOTYPEIgA  1 1812.2
&lt;none&gt;          1812.4
- AGE         1 1813.5
- ALB         1 1815.1
- MRI         1 1817.1
- B2M         1 1818.5
- Cyto_Abn    1 1819.9
- LDH         1 1822.4

Step:  AIC=1810.45
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEIgA + 
    ISOTYPEIgD + ISOTYPEIgG + CREAT + LDH + ALB + HGB + ASPC + 
    BMPC + MRI + Cyto_Abn

             Df    AIC
- ISOTYPEIgD  1 1808.5
- CREAT       1 1808.5
- SEX         1 1808.5
- ASPC        1 1808.8
- HGB         1 1808.9
- BMPC        1 1808.9
- PROT        1 1809.3
- ISOTYPEIgG  1 1810.0
- ISOTYPEIgA  1 1810.2
&lt;none&gt;          1810.5
- AGE         1 1811.6
- ALB         1 1813.2
- MRI         1 1815.1
- B2M         1 1816.5
- Cyto_Abn    1 1817.9
- LDH         1 1820.5

Step:  AIC=1808.53
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEIgA + 
    ISOTYPEIgG + CREAT + LDH + ALB + HGB + ASPC + BMPC + MRI + 
    Cyto_Abn

             Df    AIC
- CREAT       1 1806.6
- SEX         1 1806.6
- ASPC        1 1806.8
- HGB         1 1807.0
- BMPC        1 1807.0
- PROT        1 1807.4
- ISOTYPEIgG  1 1808.0
- ISOTYPEIgA  1 1808.2
&lt;none&gt;          1808.5
- AGE         1 1809.7
- ALB         1 1811.3
- MRI         1 1813.2
- B2M         1 1814.5
- Cyto_Abn    1 1815.9
- LDH         1 1818.5

Step:  AIC=1806.6
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEIgA + 
    ISOTYPEIgG + LDH + ALB + HGB + ASPC + BMPC + MRI + Cyto_Abn

             Df    AIC
- SEX         1 1804.7
- ASPC        1 1804.9
- HGB         1 1805.0
- BMPC        1 1805.1
- PROT        1 1805.5
- ISOTYPEIgG  1 1806.1
- ISOTYPEIgA  1 1806.3
&lt;none&gt;          1806.6
- AGE         1 1807.9
- ALB         1 1809.5
- MRI         1 1811.2
- Cyto_Abn    1 1814.1
- LDH         1 1816.5
- B2M         1 1818.9

Step:  AIC=1804.68
Surv(OS_Time, OS_Censor) ~ AGE + PROT + B2M + ISOTYPEIgA + ISOTYPEIgG + 
    LDH + ALB + HGB + ASPC + BMPC + MRI + Cyto_Abn

             Df    AIC
- ASPC        1 1803.0
- HGB         1 1803.0
- BMPC        1 1803.2
- PROT        1 1803.5
- ISOTYPEIgG  1 1804.2
- ISOTYPEIgA  1 1804.4
&lt;none&gt;          1804.7
- AGE         1 1805.9
- ALB         1 1807.6
- MRI         1 1809.7
- Cyto_Abn    1 1812.4
- LDH         1 1814.5
- B2M         1 1816.9

Step:  AIC=1802.96
Surv(OS_Time, OS_Censor) ~ AGE + PROT + B2M + ISOTYPEIgA + ISOTYPEIgG + 
    LDH + ALB + HGB + BMPC + MRI + Cyto_Abn

             Df    AIC
- BMPC        1 1801.2
- HGB         1 1801.2
- PROT        1 1801.7
- ISOTYPEIgG  1 1802.5
- ISOTYPEIgA  1 1802.7
&lt;none&gt;          1803.0
- AGE         1 1804.1
- ALB         1 1805.8
- MRI         1 1808.0
- Cyto_Abn    1 1810.4
- LDH         1 1812.6
- B2M         1 1815.0

Step:  AIC=1801.2
Surv(OS_Time, OS_Censor) ~ AGE + PROT + B2M + ISOTYPEIgA + ISOTYPEIgG + 
    LDH + ALB + HGB + MRI + Cyto_Abn

             Df    AIC
- HGB         1 1799.7
- PROT        1 1800.0
- ISOTYPEIgG  1 1800.8
- ISOTYPEIgA  1 1801.1
&lt;none&gt;          1801.2
- AGE         1 1802.4
- ALB         1 1804.2
- MRI         1 1806.3
- Cyto_Abn    1 1809.4
- LDH         1 1811.2
- B2M         1 1814.4

Step:  AIC=1799.7
Surv(OS_Time, OS_Censor) ~ AGE + PROT + B2M + ISOTYPEIgA + ISOTYPEIgG + 
    LDH + ALB + MRI + Cyto_Abn

             Df    AIC
- PROT        1 1798.4
- ISOTYPEIgG  1 1799.3
&lt;none&gt;          1799.7
- ISOTYPEIgA  1 1799.8
- AGE         1 1800.7
- MRI         1 1804.4
- ALB         1 1804.5
- Cyto_Abn    1 1808.0
- LDH         1 1810.1
- B2M         1 1814.7

Step:  AIC=1798.41
Surv(OS_Time, OS_Censor) ~ AGE + B2M + ISOTYPEIgA + ISOTYPEIgG + 
    LDH + ALB + MRI + Cyto_Abn

             Df    AIC
- ISOTYPEIgG  1 1798.2
&lt;none&gt;          1798.4
- ISOTYPEIgA  1 1798.8
- AGE         1 1799.3
- MRI         1 1803.0
- ALB         1 1803.2
- Cyto_Abn    1 1806.6
- LDH         1 1809.9
- B2M         1 1813.5

Step:  AIC=1798.19
Surv(OS_Time, OS_Censor) ~ AGE + B2M + ISOTYPEIgA + LDH + ALB + 
    MRI + Cyto_Abn

             Df    AIC
- ISOTYPEIgA  1 1796.9
&lt;none&gt;          1798.2
- AGE         1 1799.5
- MRI         1 1801.6
- ALB         1 1806.6
- LDH         1 1808.3
- Cyto_Abn    1 1808.7
- B2M         1 1811.5

Step:  AIC=1796.86
Surv(OS_Time, OS_Censor) ~ AGE + B2M + LDH + ALB + MRI + Cyto_Abn

           Df    AIC
&lt;none&gt;        1796.9
- AGE       1 1798.1
- MRI       1 1800.2
- ALB       1 1804.8
- LDH       1 1806.5
- Cyto_Abn  1 1807.6
- B2M       1 1810.1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Resumir el modelo final ajustado</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>modelo_exp_backward_summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(modelo_exp_backward)</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(modelo_exp_backward_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
survreg(formula = Surv(OS_Time, OS_Censor) ~ AGE + B2M + LDH + 
    ALB + MRI + Cyto_Abn, data = Arkansas_SinDatosFaltantes, 
    dist = "exponential")
               Value Std. Error     z       p
(Intercept)  5.51191    0.77850  7.08 1.4e-12
AGE         -0.01539    0.00864 -1.78 0.07473
B2M         -0.04319    0.00969 -4.46 8.3e-06
LDH         -0.00387    0.00107 -3.63 0.00028
ALB          0.41607    0.12900  3.23 0.00126
MRI         -0.01137    0.00470 -2.42 0.01549
Cyto_Abn    -0.59444    0.16629 -3.57 0.00035

Scale fixed at 1 

Exponential distribution
Loglik(model)= -891.4   Loglik(intercept only)= -936
    Chisq= 89.22 on 6 degrees of freedom, p= 4.4e-17 
Number of Newton-Raphson Iterations: 5 
n= 467 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>modelo_weibull <span class="ot">&lt;-</span> <span class="fu">survreg</span>(<span class="fu">Surv</span>(OS_Time, OS_Censor) <span class="sc">~</span> AGE <span class="sc">+</span> SEX <span class="sc">+</span> PROT <span class="sc">+</span> B2M <span class="sc">+</span> ISOTYPEFLC <span class="sc">+</span> </span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>                          ISOTYPEIgA <span class="sc">+</span> ISOTYPEIgD <span class="sc">+</span> ISOTYPEIgG <span class="sc">+</span> CRP <span class="sc">+</span> CREAT <span class="sc">+</span> LDH <span class="sc">+</span> ALB <span class="sc">+</span> </span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>                          HGB <span class="sc">+</span> ASPC <span class="sc">+</span> BMPC <span class="sc">+</span> MRI <span class="sc">+</span> Cyto_Abn, <span class="at">data =</span> Arkansas_SinDatosFaltantes, <span class="at">dist =</span> <span class="st">"weibull"</span>)</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>modelo_weibull_backward <span class="ot">&lt;-</span> <span class="fu">step</span>(modelo_weibull, <span class="at">direction =</span> <span class="st">"backward"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=1811.1
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEFLC + 
    ISOTYPEIgA + ISOTYPEIgD + ISOTYPEIgG + CRP + CREAT + LDH + 
    ALB + HGB + ASPC + BMPC + MRI + Cyto_Abn

             Df    AIC
- ISOTYPEFLC  1 1809.1
- ISOTYPEIgA  1 1809.1
- ISOTYPEIgD  1 1809.1
- ISOTYPEIgG  1 1809.1
- CRP         1 1809.1
- CREAT       1 1809.2
- SEX         1 1809.2
- PROT        1 1809.3
- ASPC        1 1809.5
- BMPC        1 1809.5
- HGB         1 1809.6
&lt;none&gt;          1811.1
- AGE         1 1812.4
- ALB         1 1814.3
- MRI         1 1816.2
- B2M         1 1818.1
- Cyto_Abn    1 1819.0
- LDH         1 1821.6

Step:  AIC=1809.1
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEIgA + 
    ISOTYPEIgD + ISOTYPEIgG + CRP + CREAT + LDH + ALB + HGB + 
    ASPC + BMPC + MRI + Cyto_Abn

             Df    AIC
- CRP         1 1807.1
- ISOTYPEIgD  1 1807.2
- CREAT       1 1807.2
- SEX         1 1807.2
- PROT        1 1807.3
- ASPC        1 1807.5
- BMPC        1 1807.5
- HGB         1 1807.6
- ISOTYPEIgG  1 1808.9
&lt;none&gt;          1809.1
- ISOTYPEIgA  1 1809.2
- AGE         1 1810.4
- ALB         1 1812.3
- MRI         1 1814.2
- B2M         1 1816.1
- Cyto_Abn    1 1817.0
- LDH         1 1819.6

Step:  AIC=1807.13
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEIgA + 
    ISOTYPEIgD + ISOTYPEIgG + CREAT + LDH + ALB + HGB + ASPC + 
    BMPC + MRI + Cyto_Abn

             Df    AIC
- CREAT       1 1805.2
- ISOTYPEIgD  1 1805.2
- SEX         1 1805.2
- PROT        1 1805.3
- ASPC        1 1805.5
- BMPC        1 1805.5
- HGB         1 1805.6
- ISOTYPEIgG  1 1806.9
&lt;none&gt;          1807.1
- ISOTYPEIgA  1 1807.2
- AGE         1 1808.5
- ALB         1 1810.4
- MRI         1 1812.2
- B2M         1 1814.1
- Cyto_Abn    1 1815.0
- LDH         1 1817.7

Step:  AIC=1805.21
Surv(OS_Time, OS_Censor) ~ AGE + SEX + PROT + B2M + ISOTYPEIgA + 
    ISOTYPEIgD + ISOTYPEIgG + LDH + ALB + HGB + ASPC + BMPC + 
    MRI + Cyto_Abn

             Df    AIC
- SEX         1 1803.3
- ISOTYPEIgD  1 1803.3
- PROT        1 1803.4
- ASPC        1 1803.6
- HGB         1 1803.6
- BMPC        1 1803.7
- ISOTYPEIgG  1 1805.0
&lt;none&gt;          1805.2
- ISOTYPEIgA  1 1805.3
- AGE         1 1806.7
- ALB         1 1808.6
- MRI         1 1810.3
- Cyto_Abn    1 1813.2
- LDH         1 1815.7
- B2M         1 1819.2

Step:  AIC=1803.29
Surv(OS_Time, OS_Censor) ~ AGE + PROT + B2M + ISOTYPEIgA + ISOTYPEIgD + 
    ISOTYPEIgG + LDH + ALB + HGB + ASPC + BMPC + MRI + Cyto_Abn

             Df    AIC
- ISOTYPEIgD  1 1801.4
- PROT        1 1801.5
- ASPC        1 1801.6
- HGB         1 1801.7
- BMPC        1 1801.7
- ISOTYPEIgG  1 1803.1
&lt;none&gt;          1803.3
- ISOTYPEIgA  1 1803.4
- AGE         1 1804.7
- ALB         1 1806.7
- MRI         1 1808.8
- Cyto_Abn    1 1811.5
- LDH         1 1813.7
- B2M         1 1817.2

Step:  AIC=1801.39
Surv(OS_Time, OS_Censor) ~ AGE + PROT + B2M + ISOTYPEIgA + ISOTYPEIgG + 
    LDH + ALB + HGB + ASPC + BMPC + MRI + Cyto_Abn

             Df    AIC
- PROT        1 1799.6
- ASPC        1 1799.7
- HGB         1 1799.8
- BMPC        1 1799.8
- ISOTYPEIgG  1 1801.1
&lt;none&gt;          1801.4
- ISOTYPEIgA  1 1801.4
- AGE         1 1802.9
- ALB         1 1804.9
- MRI         1 1806.9
- Cyto_Abn    1 1809.6
- LDH         1 1811.7
- B2M         1 1815.2

Step:  AIC=1799.61
Surv(OS_Time, OS_Censor) ~ AGE + B2M + ISOTYPEIgA + ISOTYPEIgG + 
    LDH + ALB + HGB + ASPC + BMPC + MRI + Cyto_Abn

             Df    AIC
- ASPC        1 1797.9
- HGB         1 1797.9
- BMPC        1 1798.0
- ISOTYPEIgG  1 1799.4
&lt;none&gt;          1799.6
- ISOTYPEIgA  1 1799.8
- AGE         1 1801.0
- ALB         1 1803.1
- MRI         1 1805.0
- Cyto_Abn    1 1807.7
- LDH         1 1810.5
- B2M         1 1813.5

Step:  AIC=1797.87
Surv(OS_Time, OS_Censor) ~ AGE + B2M + ISOTYPEIgA + ISOTYPEIgG + 
    LDH + ALB + HGB + BMPC + MRI + Cyto_Abn

             Df    AIC
- BMPC        1 1796.0
- HGB         1 1796.1
- ISOTYPEIgG  1 1797.7
&lt;none&gt;          1797.9
- ISOTYPEIgA  1 1798.0
- AGE         1 1799.2
- ALB         1 1801.3
- MRI         1 1803.3
- Cyto_Abn    1 1805.7
- LDH         1 1808.6
- B2M         1 1811.5

Step:  AIC=1796.03
Surv(OS_Time, OS_Censor) ~ AGE + B2M + ISOTYPEIgA + ISOTYPEIgG + 
    LDH + ALB + HGB + MRI + Cyto_Abn

             Df    AIC
- HGB         1 1794.4
- ISOTYPEIgG  1 1795.9
&lt;none&gt;          1796.0
- ISOTYPEIgA  1 1796.4
- AGE         1 1797.4
- ALB         1 1799.6
- MRI         1 1801.5
- Cyto_Abn    1 1804.5
- LDH         1 1807.1
- B2M         1 1810.9

Step:  AIC=1794.44
Surv(OS_Time, OS_Censor) ~ AGE + B2M + ISOTYPEIgA + ISOTYPEIgG + 
    LDH + ALB + MRI + Cyto_Abn

             Df    AIC
- ISOTYPEIgG  1 1794.3
&lt;none&gt;          1794.4
- ISOTYPEIgA  1 1795.0
- AGE         1 1795.7
- MRI         1 1799.6
- ALB         1 1800.0
- Cyto_Abn    1 1803.0
- LDH         1 1805.9
- B2M         1 1810.9

Step:  AIC=1794.3
Surv(OS_Time, OS_Censor) ~ AGE + B2M + ISOTYPEIgA + LDH + ALB + 
    MRI + Cyto_Abn

             Df    AIC
- ISOTYPEIgA  1 1793.0
&lt;none&gt;          1794.3
- AGE         1 1796.0
- MRI         1 1798.2
- ALB         1 1803.7
- LDH         1 1804.3
- Cyto_Abn    1 1805.3
- B2M         1 1808.9

Step:  AIC=1793.01
Surv(OS_Time, OS_Censor) ~ AGE + B2M + LDH + ALB + MRI + Cyto_Abn

           Df    AIC
&lt;none&gt;        1793.0
- AGE       1 1794.6
- MRI       1 1796.8
- ALB       1 1802.0
- LDH       1 1802.5
- Cyto_Abn  1 1804.2
- B2M       1 1807.6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>modelo_weibull_backward_summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(modelo_weibull_backward)</span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(modelo_weibull_backward_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
survreg(formula = Surv(OS_Time, OS_Censor) ~ AGE + B2M + LDH + 
    ALB + MRI + Cyto_Abn, data = Arkansas_SinDatosFaltantes, 
    dist = "weibull")
                Value Std. Error     z       p
(Intercept)  5.270454   0.658080  8.01 1.2e-15
AGE         -0.013697   0.007296 -1.88 0.06046
B2M         -0.038161   0.008393 -4.55 5.5e-06
LDH         -0.003273   0.000935 -3.50 0.00046
ALB          0.365244   0.109360  3.34 0.00084
MRI         -0.009852   0.003944 -2.50 0.01249
Cyto_Abn    -0.508366   0.142792 -3.56 0.00037
Log(scale)  -0.177172   0.070644 -2.51 0.01214

Scale= 0.838 

Weibull distribution
Loglik(model)= -888.5   Loglik(intercept only)= -935.2
    Chisq= 93.39 on 6 degrees of freedom, p= 6e-18 
Number of Newton-Raphson Iterations: 7 
n= 467 </code></pre>
</div>
</div>
</section>
<section id="residuos-cox-snell" class="level2">
<h2 class="anchored" data-anchor-id="residuos-cox-snell">Residuos Cox-Snell</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular los residuos de Cox-Snell para los tres modelos</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>residuos_cox_snell_modelo_no_parametrico <span class="ot">&lt;-</span> modelo_backward<span class="sc">$</span>linear.predictors</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>residuos_cox_snell_modelo_exp <span class="ot">&lt;-</span> modelo_exp_backward<span class="sc">$</span>linear.predictors</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>residuos_cox_snell_modelo_weibull <span class="ot">&lt;-</span> modelo_weibull_backward<span class="sc">$</span>linear.predictors</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un nuevo conjunto de datos que contenga los residuos de Cox-Snell y la información de censura para cada modelo</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>datos_cox_snell_no_parametrico <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">residuos_cox_snell =</span> residuos_cox_snell_modelo_no_parametrico,</span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">OS_Censor =</span> Arkansas_SinDatosFaltantes<span class="sc">$</span>OS_Censor</span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>datos_cox_snell_exp <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">residuos_cox_snell =</span> residuos_cox_snell_modelo_exp,</span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">OS_Censor =</span> Arkansas_SinDatosFaltantes<span class="sc">$</span>OS_Censor</span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-16"><a href="#cb96-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-17"><a href="#cb96-17" aria-hidden="true" tabindex="-1"></a>datos_cox_snell_weibull <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb96-18"><a href="#cb96-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">residuos_cox_snell =</span> residuos_cox_snell_modelo_weibull,</span>
<span id="cb96-19"><a href="#cb96-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">OS_Censor =</span> Arkansas_SinDatosFaltantes<span class="sc">$</span>OS_Censor</span>
<span id="cb96-20"><a href="#cb96-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb96-21"><a href="#cb96-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-22"><a href="#cb96-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Ajustar modelos de Kaplan-Meier a los residuos de Cox-Snell</span></span>
<span id="cb96-23"><a href="#cb96-23" aria-hidden="true" tabindex="-1"></a>modelo_kaplan_meier_no_parametrico <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(residuos_cox_snell, OS_Censor) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> datos_cox_snell_no_parametrico)</span>
<span id="cb96-24"><a href="#cb96-24" aria-hidden="true" tabindex="-1"></a>modelo_kaplan_meier_exp <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(residuos_cox_snell, OS_Censor) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> datos_cox_snell_exp)</span>
<span id="cb96-25"><a href="#cb96-25" aria-hidden="true" tabindex="-1"></a>modelo_kaplan_meier_weibull <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(residuos_cox_snell, OS_Censor) <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> datos_cox_snell_weibull)</span>
<span id="cb96-26"><a href="#cb96-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-27"><a href="#cb96-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Graficar la función de supervivencia acumulada para cada modelo</span></span>
<span id="cb96-28"><a href="#cb96-28" aria-hidden="true" tabindex="-1"></a>grafico_no_parametrico <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb96-29"><a href="#cb96-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_step</span>(<span class="fu">aes</span>(<span class="at">x =</span> modelo_kaplan_meier_no_parametrico<span class="sc">$</span>time, <span class="at">y =</span> modelo_kaplan_meier_no_parametrico<span class="sc">$</span>surv), <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb96-30"><a href="#cb96-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">1</span>, <span class="at">slope =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb96-31"><a href="#cb96-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb96-32"><a href="#cb96-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Residuos de Cox-Snell"</span>,</span>
<span id="cb96-33"><a href="#cb96-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Modelo Semi-parametrico"</span>,</span>
<span id="cb96-34"><a href="#cb96-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Residuos de Cox-Snell"</span>,</span>
<span id="cb96-35"><a href="#cb96-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Función de Supervivencia Acumulada"</span></span>
<span id="cb96-36"><a href="#cb96-36" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb96-37"><a href="#cb96-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb96-38"><a href="#cb96-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-39"><a href="#cb96-39" aria-hidden="true" tabindex="-1"></a>grafico_exp <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb96-40"><a href="#cb96-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_step</span>(<span class="fu">aes</span>(<span class="at">x =</span> modelo_kaplan_meier_exp<span class="sc">$</span>time, <span class="at">y =</span> modelo_kaplan_meier_exp<span class="sc">$</span>surv), <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb96-41"><a href="#cb96-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">1</span>, <span class="at">slope =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb96-42"><a href="#cb96-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb96-43"><a href="#cb96-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Residuos de Cox-Snell"</span>,</span>
<span id="cb96-44"><a href="#cb96-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Modelo Exponencial"</span>,</span>
<span id="cb96-45"><a href="#cb96-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Residuos de Cox-Snell"</span>,</span>
<span id="cb96-46"><a href="#cb96-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Función de Supervivencia Acumulada"</span></span>
<span id="cb96-47"><a href="#cb96-47" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb96-48"><a href="#cb96-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb96-49"><a href="#cb96-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-50"><a href="#cb96-50" aria-hidden="true" tabindex="-1"></a>grafico_weibull <span class="ot">&lt;-</span> <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb96-51"><a href="#cb96-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_step</span>(<span class="fu">aes</span>(<span class="at">x =</span> modelo_kaplan_meier_weibull<span class="sc">$</span>time, <span class="at">y =</span> modelo_kaplan_meier_weibull<span class="sc">$</span>surv), <span class="at">color =</span> <span class="st">"blue"</span>) <span class="sc">+</span></span>
<span id="cb96-52"><a href="#cb96-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">intercept =</span> <span class="dv">1</span>, <span class="at">slope =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb96-53"><a href="#cb96-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb96-54"><a href="#cb96-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Residuos de Cox-Snell"</span>, </span>
<span id="cb96-55"><a href="#cb96-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Modelo Weibull"</span>,</span>
<span id="cb96-56"><a href="#cb96-56" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Residuos de Cox-Snell"</span>,</span>
<span id="cb96-57"><a href="#cb96-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Función de Supervivencia Acumulada"</span></span>
<span id="cb96-58"><a href="#cb96-58" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb96-59"><a href="#cb96-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb96-60"><a href="#cb96-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-61"><a href="#cb96-61" aria-hidden="true" tabindex="-1"></a><span class="co"># Colocar los tres gráficos uno al lado del otro</span></span>
<span id="cb96-62"><a href="#cb96-62" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(grafico_no_parametrico, grafico_exp, grafico_weibull, <span class="at">ncol =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico Q-Q para residuos de deviance</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qqplot</span>(<span class="fu">qexp</span>(<span class="fu">ppoints</span>(<span class="fu">nrow</span>(Arkansas_SinDatosFaltantes)),<span class="dv">1</span>),residuos_cox_snell_modelo_no_parametrico)</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a><span class="fu">qqline</span>(residuos_cox_snell_modelo_no_parametrico, <span class="at">col =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-36-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="residuos-de-martingale" class="level2">
<h2 class="anchored" data-anchor-id="residuos-de-martingale">Residuos de Martingale</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>residuos_martingale <span class="ot">&lt;-</span> <span class="fu">residuals</span>(modelo_backward, <span class="at">type =</span> <span class="st">"martingale"</span>)</span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(residuos_martingale, </span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Distribución de los Residuos de Martingale"</span>, </span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Residuos de Martingale"</span>, </span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> <span class="st">"#1f78b4"</span>, </span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>     <span class="at">border =</span> <span class="st">"white"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>variables_backward <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"AGE"</span>, <span class="st">"B2M"</span>, <span class="st">"LDH"</span>,<span class="st">"ALB"</span>, <span class="st">"MRI"</span>)</span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (variable <span class="cf">in</span> variables_backward) {</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>  plot <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> Arkansas_SinDatosFaltantes, <span class="fu">aes_string</span>(<span class="at">x =</span> variable, <span class="at">y =</span> <span class="st">"residuos_martingale"</span>)) <span class="sc">+</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"#1f78b4"</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Residuos de Martingale vs"</span>, variable),</span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> variable,</span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> <span class="st">"Residuos de Martingale"</span>) <span class="sc">+</span></span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Mostrar el gráfico</span></span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(plot)</span>
<span id="cb99-13"><a href="#cb99-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `aes_string()` was deprecated in ggplot2 3.0.0.
ℹ Please use tidy evaluation idioms with `aes()`.
ℹ See also `vignette("ggplot2-in-packages")` for more information.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-37-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-37-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-37-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-37-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-37-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Histograma –&gt; Para detectar posibles anomalias. Ya que los residuos de martingale van de -infinito a 1.</p>
<p>Gráficos –&gt; La curva roja es un suavizado que representa la tendencia de los residuos frente a los valores de la variable. La banda gris es el intervalo de confianza. Si la curva se desvía significativamente de la línea horizontal (en 0), puede indicar que la relación entre B2M y el riesgo no es lineal, lo cual podría violar los supuestos del modelo de Cox.</p>
<p>La curva roja parece desviarse de la línea horizontal en valores altos de B2M, lo que sugiere que la relación entre B2M y el riesgo podría no ser lineal. Lo mismo para MRI.</p>
<p>R nos devuelve una alerta indicando: Valores muy alejados del resto de los datos (outliers) pueden causar problemas en el cálculo, por lo que la desviación de la recta 0 puede deberse a esto.</p>
</section>
<section id="deviance" class="level2">
<h2 class="anchored" data-anchor-id="deviance">Deviance</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular los residuos de deviance</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a>residuos_deviance_modelo_no_parametrico <span class="ot">&lt;-</span> <span class="fu">residuals</span>(modelo_backward, <span class="at">type =</span> <span class="st">"deviance"</span>)</span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>residuos_deviance_modelo_exp <span class="ot">&lt;-</span> <span class="fu">residuals</span>(modelo_exp_backward, <span class="at">type =</span> <span class="st">"deviance"</span>)</span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>residuos_deviance_modelo_weibull <span class="ot">&lt;-</span> <span class="fu">residuals</span>(modelo_weibull_backward, <span class="at">type =</span> <span class="st">"deviance"</span>)</span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Arkansas_SinDatosFaltantes, <span class="fu">aes</span>(<span class="at">x =</span> residuos_deviance_modelo_no_parametrico)) <span class="sc">+</span></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.5</span>, <span class="at">fill =</span> <span class="st">"skyblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Histograma de Residuos de Deviance"</span>,</span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Residuos de Deviance"</span>,</span>
<span id="cb106-12"><a href="#cb106-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Frecuencia"</span></span>
<span id="cb106-13"><a href="#cb106-13" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb106-14"><a href="#cb106-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Boxplot de los residuos de deviance</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> Arkansas_SinDatosFaltantes, <span class="fu">aes</span>(<span class="at">y =</span> residuos_deviance_modelo_no_parametrico)) <span class="sc">+</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">fill =</span> <span class="st">"lightblue"</span>) <span class="sc">+</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Boxplot de Residuos de Deviance"</span>,</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Residuos de Deviance"</span></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-38-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico Q-Q para residuos de deviance</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(residuos_deviance_modelo_no_parametrico)</span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a><span class="fu">qqline</span>(residuos_deviance_modelo_no_parametrico, <span class="at">col =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-38-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>variables_backward <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"AGE"</span>, <span class="st">"B2M"</span>, <span class="st">"LDH"</span>,<span class="st">"ALB"</span>, <span class="st">"MRI"</span>)</span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (variable <span class="cf">in</span> variables_backward) {</span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>plot_modelo_no_parametrico <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> Arkansas_SinDatosFaltantes, <span class="fu">aes_string</span>(<span class="at">x =</span> variable, <span class="at">y =</span> <span class="st">"residuos_deviance_modelo_no_parametrico"</span>)) <span class="sc">+</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Deviance vs "</span>,variable),</span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Modelo No parametrico"</span>,</span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> variable,</span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Residuos de Deviance"</span></span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a>plot_modelo_exp <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> Arkansas_SinDatosFaltantes, <span class="fu">aes_string</span>(<span class="at">x =</span> variable, <span class="at">y =</span> <span class="st">"residuos_deviance_modelo_exp"</span>)) <span class="sc">+</span></span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb109-16"><a href="#cb109-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb109-17"><a href="#cb109-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb109-18"><a href="#cb109-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Deviance vs "</span>,variable),</span>
<span id="cb109-19"><a href="#cb109-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Modelo Exponencial"</span>,</span>
<span id="cb109-20"><a href="#cb109-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> variable,</span>
<span id="cb109-21"><a href="#cb109-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Residuos de Deviance"</span></span>
<span id="cb109-22"><a href="#cb109-22" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb109-23"><a href="#cb109-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb109-24"><a href="#cb109-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-25"><a href="#cb109-25" aria-hidden="true" tabindex="-1"></a>plot_modelo_weibull<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> Arkansas_SinDatosFaltantes, <span class="fu">aes_string</span>(<span class="at">x =</span> variable, <span class="at">y =</span> <span class="st">"residuos_deviance_modelo_weibull"</span>)) <span class="sc">+</span></span>
<span id="cb109-26"><a href="#cb109-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb109-27"><a href="#cb109-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">se =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb109-28"><a href="#cb109-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb109-29"><a href="#cb109-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">"Deviance vs "</span>,variable),</span>
<span id="cb109-30"><a href="#cb109-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Modelo Weibull"</span>,</span>
<span id="cb109-31"><a href="#cb109-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> variable,</span>
<span id="cb109-32"><a href="#cb109-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Residuos de Deviance"</span></span>
<span id="cb109-33"><a href="#cb109-33" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb109-34"><a href="#cb109-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb109-35"><a href="#cb109-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-36"><a href="#cb109-36" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(plot_modelo_no_parametrico, plot_modelo_exp, plot_modelo_weibull, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb109-37"><a href="#cb109-37" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-38-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-38-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-38-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-38-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'
`geom_smooth()` using formula = 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-38-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gráfico Q-Q para residuos de deviance</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(residuos_deviance_modelo_no_parametrico)</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="fu">qqline</span>(residuos_deviance_modelo_no_parametrico, <span class="at">col =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-38-9.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>##&nbsp;Residuos Schoenfeld</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a>residuos_schoenfeld_no_parametrico <span class="ot">&lt;-</span> <span class="fu">cox.zph</span>(modelo_backward)</span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a>residuos_schoenfeld_no_parametrico</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         chisq df    p
AGE      1.761  1 0.18
B2M      0.615  1 0.43
LDH      1.195  1 0.27
ALB      1.740  1 0.19
MRI      0.289  1 0.59
Cyto_Abn 0.225  1 0.64
GLOBAL   6.668  6 0.35</code></pre>
</div>
</div>
<p>Todos los valores p son mayores que 0.05, lo que indica que no hay evidencia suficiente para rechazar el supuesto de riesgos proporcionales para ninguna de las covariables.</p>
</section>
<section id="aic" class="level2">
<h2 class="anchored" data-anchor-id="aic">AIC</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular el AIC para cada modelo</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>aic_modelo_no_parametrico <span class="ot">&lt;-</span> <span class="fu">AIC</span>(modelo_backward)</span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>aic_modelo_exp <span class="ot">&lt;-</span> <span class="fu">AIC</span>(modelo_exp_backward)</span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>aic_modelo_weibull <span class="ot">&lt;-</span> <span class="fu">AIC</span>(modelo_weibull_backward)</span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear un data frame con los resultados de AIC</span></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a>aic_resultados <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">nombres_modelos =</span> <span class="fu">c</span>(<span class="st">"Modelo No Paramétrico"</span>, <span class="st">"Modelo Exponencial"</span>, <span class="st">"Modelo Weibull"</span>),</span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">valor_aic =</span> <span class="fu">c</span>(aic_modelo_no_parametrico, aic_modelo_exp, aic_modelo_weibull)</span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear la tabla visual con `gt()`</span></span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a>tabla_aic <span class="ot">&lt;-</span> aic_resultados <span class="sc">%&gt;%</span></span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb118-15"><a href="#cb118-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb118-16"><a href="#cb118-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Comparación de AIC entre Modelos"</span></span>
<span id="cb118-17"><a href="#cb118-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb118-18"><a href="#cb118-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb118-19"><a href="#cb118-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="st">"valor_aic"</span>,</span>
<span id="cb118-20"><a href="#cb118-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">2</span></span>
<span id="cb118-21"><a href="#cb118-21" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb118-22"><a href="#cb118-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb118-23"><a href="#cb118-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">nombres_modelos =</span> <span class="st">"Modelo"</span>,</span>
<span id="cb118-24"><a href="#cb118-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">valor_aic =</span> <span class="st">"Valor AIC"</span></span>
<span id="cb118-25"><a href="#cb118-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb118-26"><a href="#cb118-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb118-27"><a href="#cb118-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">12</span>),</span>
<span id="cb118-28"><a href="#cb118-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.title.font.size =</span> <span class="fu">px</span>(<span class="dv">18</span>)</span>
<span id="cb118-29"><a href="#cb118-29" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb118-30"><a href="#cb118-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-31"><a href="#cb118-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar la tabla</span></span>
<span id="cb118-32"><a href="#cb118-32" aria-hidden="true" tabindex="-1"></a>tabla_aic</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="uoiozptfkh" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#uoiozptfkh table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#uoiozptfkh thead, #uoiozptfkh tbody, #uoiozptfkh tfoot, #uoiozptfkh tr, #uoiozptfkh td, #uoiozptfkh th {
  border-style: none;
}

#uoiozptfkh p {
  margin: 0;
  padding: 0;
}

#uoiozptfkh .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 12px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#uoiozptfkh .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#uoiozptfkh .gt_title {
  color: #333333;
  font-size: 18px;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#uoiozptfkh .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#uoiozptfkh .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#uoiozptfkh .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uoiozptfkh .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#uoiozptfkh .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#uoiozptfkh .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#uoiozptfkh .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#uoiozptfkh .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#uoiozptfkh .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#uoiozptfkh .gt_spanner_row {
  border-bottom-style: hidden;
}

#uoiozptfkh .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#uoiozptfkh .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#uoiozptfkh .gt_from_md > :first-child {
  margin-top: 0;
}

#uoiozptfkh .gt_from_md > :last-child {
  margin-bottom: 0;
}

#uoiozptfkh .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#uoiozptfkh .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#uoiozptfkh .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#uoiozptfkh .gt_row_group_first td {
  border-top-width: 2px;
}

#uoiozptfkh .gt_row_group_first th {
  border-top-width: 2px;
}

#uoiozptfkh .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#uoiozptfkh .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#uoiozptfkh .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#uoiozptfkh .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uoiozptfkh .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#uoiozptfkh .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#uoiozptfkh .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#uoiozptfkh .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#uoiozptfkh .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#uoiozptfkh .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#uoiozptfkh .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#uoiozptfkh .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#uoiozptfkh .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#uoiozptfkh .gt_left {
  text-align: left;
}

#uoiozptfkh .gt_center {
  text-align: center;
}

#uoiozptfkh .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#uoiozptfkh .gt_font_normal {
  font-weight: normal;
}

#uoiozptfkh .gt_font_bold {
  font-weight: bold;
}

#uoiozptfkh .gt_font_italic {
  font-style: italic;
}

#uoiozptfkh .gt_super {
  font-size: 65%;
}

#uoiozptfkh .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#uoiozptfkh .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#uoiozptfkh .gt_indent_1 {
  text-indent: 5px;
}

#uoiozptfkh .gt_indent_2 {
  text-indent: 10px;
}

#uoiozptfkh .gt_indent_3 {
  text-indent: 15px;
}

#uoiozptfkh .gt_indent_4 {
  text-indent: 20px;
}

#uoiozptfkh .gt_indent_5 {
  text-indent: 25px;
}

#uoiozptfkh .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#uoiozptfkh div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="2" class="gt_heading gt_title gt_font_normal gt_bottom_border">Comparación de AIC entre Modelos</th>
</tr>
<tr class="odd gt_col_headings">
<th id="nombres_modelos" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Modelo</th>
<th id="valor_aic" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Valor AIC</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_modelos">Modelo No Paramétrico</td>
<td class="gt_row gt_right" headers="valor_aic">1,700.58</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="nombres_modelos">Modelo Exponencial</td>
<td class="gt_row gt_right" headers="valor_aic">1,796.86</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_modelos">Modelo Weibull</td>
<td class="gt_row gt_right" headers="valor_aic">1,793.01</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
</section>
</section>
<section id="concordancia" class="level1">
<h1>Concordancia</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el objeto de supervivencia</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>surv_obj <span class="ot">&lt;-</span> <span class="fu">Surv</span>(Arkansas_SinDatosFaltantes<span class="sc">$</span>OS_Time, Arkansas_SinDatosFaltantes<span class="sc">$</span>OS_Censor)</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular el C-Index para el modelo de Cox</span></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>concordance_cox <span class="ot">&lt;-</span> <span class="fu">concordance</span>(modelo_backward, <span class="at">newdata =</span> Arkansas_SinDatosFaltantes)</span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>c_index_cox <span class="ot">&lt;-</span> concordance_cox<span class="sc">$</span>concordance</span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular el C-Index para el modelo Exponencial</span></span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a>concordance_exp <span class="ot">&lt;-</span> <span class="fu">concordance</span>(modelo_exp_backward, <span class="at">newdata =</span> Arkansas_SinDatosFaltantes)</span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a>c_index_exp <span class="ot">&lt;-</span> concordance_exp<span class="sc">$</span>concordance</span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-12"><a href="#cb119-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Calcular el C-Index para el modelo Weibull</span></span>
<span id="cb119-13"><a href="#cb119-13" aria-hidden="true" tabindex="-1"></a>concordance_weibull <span class="ot">&lt;-</span> <span class="fu">concordance</span>(modelo_weibull_backward, <span class="at">newdata =</span> Arkansas_SinDatosFaltantes)</span>
<span id="cb119-14"><a href="#cb119-14" aria-hidden="true" tabindex="-1"></a>c_index_weibull <span class="ot">&lt;-</span> concordance_weibull<span class="sc">$</span>concordance</span>
<span id="cb119-15"><a href="#cb119-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-16"><a href="#cb119-16" aria-hidden="true" tabindex="-1"></a>c_index_resultados <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb119-17"><a href="#cb119-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">nombres_modelos =</span> <span class="fu">c</span>(<span class="st">"Modelo Cox"</span>, <span class="st">"Modelo Exponencial"</span>, <span class="st">"Modelo Weibull"</span>),</span>
<span id="cb119-18"><a href="#cb119-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">valor_c_index =</span> <span class="fu">c</span>(c_index_cox, c_index_exp, c_index_weibull)</span>
<span id="cb119-19"><a href="#cb119-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb119-20"><a href="#cb119-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-21"><a href="#cb119-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear la tabla visual con `gt()`</span></span>
<span id="cb119-22"><a href="#cb119-22" aria-hidden="true" tabindex="-1"></a>tabla_c_index <span class="ot">&lt;-</span> c_index_resultados <span class="sc">%&gt;%</span></span>
<span id="cb119-23"><a href="#cb119-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb119-24"><a href="#cb119-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_header</span>(</span>
<span id="cb119-25"><a href="#cb119-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Comparación del C-Index entre Modelos"</span></span>
<span id="cb119-26"><a href="#cb119-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb119-27"><a href="#cb119-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fmt_number</span>(</span>
<span id="cb119-28"><a href="#cb119-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="st">"valor_c_index"</span>,</span>
<span id="cb119-29"><a href="#cb119-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">decimals =</span> <span class="dv">3</span></span>
<span id="cb119-30"><a href="#cb119-30" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb119-31"><a href="#cb119-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb119-32"><a href="#cb119-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">nombres_modelos =</span> <span class="st">"Modelo"</span>,</span>
<span id="cb119-33"><a href="#cb119-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">valor_c_index =</span> <span class="st">"Valor C-Index"</span></span>
<span id="cb119-34"><a href="#cb119-34" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb119-35"><a href="#cb119-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tab_options</span>(</span>
<span id="cb119-36"><a href="#cb119-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">table.font.size =</span> <span class="fu">px</span>(<span class="dv">15</span>),</span>
<span id="cb119-37"><a href="#cb119-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">heading.title.font.size =</span> <span class="fu">px</span>(<span class="dv">18</span>)</span>
<span id="cb119-38"><a href="#cb119-38" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb119-39"><a href="#cb119-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-40"><a href="#cb119-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar la tabla</span></span>
<span id="cb119-41"><a href="#cb119-41" aria-hidden="true" tabindex="-1"></a>tabla_c_index</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="vvgpqvrqbd" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#vvgpqvrqbd table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#vvgpqvrqbd thead, #vvgpqvrqbd tbody, #vvgpqvrqbd tfoot, #vvgpqvrqbd tr, #vvgpqvrqbd td, #vvgpqvrqbd th {
  border-style: none;
}

#vvgpqvrqbd p {
  margin: 0;
  padding: 0;
}

#vvgpqvrqbd .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 15px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#vvgpqvrqbd .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#vvgpqvrqbd .gt_title {
  color: #333333;
  font-size: 18px;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#vvgpqvrqbd .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#vvgpqvrqbd .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vvgpqvrqbd .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vvgpqvrqbd .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#vvgpqvrqbd .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#vvgpqvrqbd .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#vvgpqvrqbd .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#vvgpqvrqbd .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#vvgpqvrqbd .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#vvgpqvrqbd .gt_spanner_row {
  border-bottom-style: hidden;
}

#vvgpqvrqbd .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#vvgpqvrqbd .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

#vvgpqvrqbd .gt_from_md > :first-child {
  margin-top: 0;
}

#vvgpqvrqbd .gt_from_md > :last-child {
  margin-bottom: 0;
}

#vvgpqvrqbd .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

#vvgpqvrqbd .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

#vvgpqvrqbd .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#vvgpqvrqbd .gt_row_group_first td {
  border-top-width: 2px;
}

#vvgpqvrqbd .gt_row_group_first th {
  border-top-width: 2px;
}

#vvgpqvrqbd .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vvgpqvrqbd .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

#vvgpqvrqbd .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#vvgpqvrqbd .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vvgpqvrqbd .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#vvgpqvrqbd .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

#vvgpqvrqbd .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #D3D3D3;
}

#vvgpqvrqbd .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

#vvgpqvrqbd .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

#vvgpqvrqbd .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vvgpqvrqbd .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vvgpqvrqbd .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#vvgpqvrqbd .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#vvgpqvrqbd .gt_left {
  text-align: left;
}

#vvgpqvrqbd .gt_center {
  text-align: center;
}

#vvgpqvrqbd .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#vvgpqvrqbd .gt_font_normal {
  font-weight: normal;
}

#vvgpqvrqbd .gt_font_bold {
  font-weight: bold;
}

#vvgpqvrqbd .gt_font_italic {
  font-style: italic;
}

#vvgpqvrqbd .gt_super {
  font-size: 65%;
}

#vvgpqvrqbd .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#vvgpqvrqbd .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#vvgpqvrqbd .gt_indent_1 {
  text-indent: 5px;
}

#vvgpqvrqbd .gt_indent_2 {
  text-indent: 10px;
}

#vvgpqvrqbd .gt_indent_3 {
  text-indent: 15px;
}

#vvgpqvrqbd .gt_indent_4 {
  text-indent: 20px;
}

#vvgpqvrqbd .gt_indent_5 {
  text-indent: 25px;
}

#vvgpqvrqbd .katex-display {
  display: inline-flex !important;
  margin-bottom: 0.75em !important;
}

#vvgpqvrqbd div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {
  height: 0px !important;
}
</style>

<table class="gt_table caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<thead>
<tr class="header gt_heading">
<th colspan="2" class="gt_heading gt_title gt_font_normal gt_bottom_border">Comparación del C-Index entre Modelos</th>
</tr>
<tr class="odd gt_col_headings">
<th id="nombres_modelos" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Modelo</th>
<th id="valor_c_index" class="gt_col_heading gt_columns_bottom_border gt_right" data-quarto-table-cell-role="th" scope="col">Valor C-Index</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_modelos">Modelo Cox</td>
<td class="gt_row gt_right" headers="valor_c_index">0.728</td>
</tr>
<tr class="even">
<td class="gt_row gt_left" headers="nombres_modelos">Modelo Exponencial</td>
<td class="gt_row gt_right" headers="valor_c_index">0.728</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="nombres_modelos">Modelo Weibull</td>
<td class="gt_row gt_right" headers="valor_c_index">0.728</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar las librerías</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>pred_backward <span class="ot">&lt;-</span> <span class="fu">predict</span>(modelo_backward, <span class="at">type =</span> <span class="st">"lp"</span>)</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>pred_exp <span class="ot">&lt;-</span>  <span class="sc">-</span><span class="fu">predict</span>(modelo_exp_backward, <span class="at">type =</span> <span class="st">"lp"</span>)</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>pred_weibull <span class="ot">&lt;-</span> <span class="sc">-</span><span class="fu">predict</span>(modelo_weibull_backward, <span class="at">type =</span> <span class="st">"lp"</span>)</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a><span class="co">#tiempos = c(5,10,20,30,40,50,60,70,80,90,100)</span></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a>tiempos <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">10</span>,<span class="dv">15</span>,<span class="dv">20</span>,<span class="dv">25</span>,<span class="dv">30</span>,<span class="dv">35</span>,<span class="dv">40</span>,<span class="dv">45</span>,<span class="dv">50</span>,<span class="dv">55</span>,<span class="dv">60</span>,<span class="dv">65</span>,<span class="dv">70</span>,<span class="dv">75</span>,<span class="dv">80</span>,<span class="dv">85</span>,<span class="dv">90</span>,<span class="dv">95</span>,<span class="dv">100</span>)</span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el objeto timeROC para el modelo backward</span></span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a>roc_backward <span class="ot">&lt;-</span> <span class="fu">timeROC</span>(</span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">T =</span> Arkansas_SinDatosFaltantes<span class="sc">$</span>OS_Time, </span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">delta =</span> Arkansas_SinDatosFaltantes<span class="sc">$</span>OS_Censor, </span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">marker =</span> pred_backward, </span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">cause =</span> <span class="dv">1</span>, </span>
<span id="cb120-14"><a href="#cb120-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">weighting =</span> <span class="st">"marginal"</span>, </span>
<span id="cb120-15"><a href="#cb120-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">times =</span> tiempos</span>
<span id="cb120-16"><a href="#cb120-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb120-17"><a href="#cb120-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el objeto timeROC para el modelo backward</span></span>
<span id="cb120-18"><a href="#cb120-18" aria-hidden="true" tabindex="-1"></a>roc_exp <span class="ot">&lt;-</span> <span class="fu">timeROC</span>(</span>
<span id="cb120-19"><a href="#cb120-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">T =</span> Arkansas_SinDatosFaltantes<span class="sc">$</span>OS_Time, </span>
<span id="cb120-20"><a href="#cb120-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">delta =</span> Arkansas_SinDatosFaltantes<span class="sc">$</span>OS_Censor, </span>
<span id="cb120-21"><a href="#cb120-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">marker =</span> pred_exp, </span>
<span id="cb120-22"><a href="#cb120-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">cause =</span> <span class="dv">1</span>, </span>
<span id="cb120-23"><a href="#cb120-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">weighting =</span> <span class="st">"marginal"</span>, </span>
<span id="cb120-24"><a href="#cb120-24" aria-hidden="true" tabindex="-1"></a>  <span class="at">times =</span> tiempos</span>
<span id="cb120-25"><a href="#cb120-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb120-26"><a href="#cb120-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el objeto timeROC para el modelo backward</span></span>
<span id="cb120-27"><a href="#cb120-27" aria-hidden="true" tabindex="-1"></a>roc_weibull<span class="ot">&lt;-</span> <span class="fu">timeROC</span>(</span>
<span id="cb120-28"><a href="#cb120-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">T =</span> Arkansas_SinDatosFaltantes<span class="sc">$</span>OS_Time, </span>
<span id="cb120-29"><a href="#cb120-29" aria-hidden="true" tabindex="-1"></a>  <span class="at">delta =</span> Arkansas_SinDatosFaltantes<span class="sc">$</span>OS_Censor, </span>
<span id="cb120-30"><a href="#cb120-30" aria-hidden="true" tabindex="-1"></a>  <span class="at">marker =</span> pred_weibull, </span>
<span id="cb120-31"><a href="#cb120-31" aria-hidden="true" tabindex="-1"></a>  <span class="at">cause =</span> <span class="dv">1</span>, </span>
<span id="cb120-32"><a href="#cb120-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">weighting =</span> <span class="st">"marginal"</span>, </span>
<span id="cb120-33"><a href="#cb120-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">times =</span> tiempos</span>
<span id="cb120-34"><a href="#cb120-34" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Extraer las AUC de los objetos timeROC</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>roc_backward_auc <span class="ot">&lt;-</span> roc_backward<span class="sc">$</span>AUC  <span class="co"># AUC para cada tiempo del modelo backward</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>roc_exp_auc <span class="ot">&lt;-</span> roc_exp<span class="sc">$</span>AUC            <span class="co"># AUC para el modelo exponencial</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>roc_weibull_auc <span class="ot">&lt;-</span> roc_weibull<span class="sc">$</span>AUC    <span class="co"># AUC para el modelo Weibull</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el marco de datos con las AUC</span></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="fu">rep</span>(roc_backward<span class="sc">$</span>times, <span class="dv">3</span>),  <span class="co"># Los tiempos son iguales para todas las curvas</span></span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="fu">c</span>(roc_backward_auc, roc_exp_auc, roc_weibull_auc),  <span class="co"># Combina las AUC de las curvas</span></span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">curva =</span> <span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">"Modelo Backward"</span>, <span class="st">"Modelo Exponencial"</span>, <span class="st">"Modelo Weibull"</span>), </span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a>              <span class="at">each =</span> <span class="fu">length</span>(roc_backward<span class="sc">$</span>times))  <span class="co"># Identificar cada curva</span></span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb121-13"><a href="#cb121-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-14"><a href="#cb121-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Cargar la librería ggplot2</span></span>
<span id="cb121-15"><a href="#cb121-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">require</span>(<span class="st">"ggplot2"</span>)) <span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span>
<span id="cb121-16"><a href="#cb121-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb121-17"><a href="#cb121-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-18"><a href="#cb121-18" aria-hidden="true" tabindex="-1"></a>grafico_comparacion_auc <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(data, <span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> y, <span class="at">color =</span> curva)) <span class="sc">+</span></span>
<span id="cb121-19"><a href="#cb121-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">1.2</span>) <span class="sc">+</span>      </span>
<span id="cb121-20"><a href="#cb121-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb121-21"><a href="#cb121-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Comparación de AUC entre Modelos"</span>, </span>
<span id="cb121-22"><a href="#cb121-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Tiempo"</span>, </span>
<span id="cb121-23"><a href="#cb121-23" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"AUC"</span>, </span>
<span id="cb121-24"><a href="#cb121-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Modelos"</span>) <span class="sc">+</span>     </span>
<span id="cb121-25"><a href="#cb121-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Modelo Backward"</span> <span class="ot">=</span> <span class="st">"#1f77b4"</span>, </span>
<span id="cb121-26"><a href="#cb121-26" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Modelo Exponencial"</span> <span class="ot">=</span> <span class="st">"#ff7f0e"</span>, </span>
<span id="cb121-27"><a href="#cb121-27" aria-hidden="true" tabindex="-1"></a>                                <span class="st">"Modelo Weibull"</span> <span class="ot">=</span> <span class="st">"#2ca02c"</span>)) <span class="sc">+</span> <span class="co"># Colores personalizados</span></span>
<span id="cb121-28"><a href="#cb121-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb121-29"><a href="#cb121-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-30"><a href="#cb121-30" aria-hidden="true" tabindex="-1"></a>grafico_comparacion_auc</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3 rows containing missing values or values outside the scale range
(`geom_line()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>grafico_comparacion_auc <span class="sc">+</span> <span class="fu">ylim</span>(<span class="dv">0</span>,<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3 rows containing missing values or values outside the scale range
(`geom_line()`).
Removed 3 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-43-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>grafico_OS_Time <span class="ot">=</span> Arkansas <span class="sc">%&gt;%</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> OS_Time)) <span class="sc">+</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"#1f78b4"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>, <span class="at">bins =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Títulos</span></span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Distribución de OS_Time"</span>,<span class="at">subtitle =</span> <span class="st">""</span>) <span class="sc">+</span></span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Tiempo (meses)"</span>, <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">pretty_breaks</span>(<span class="at">n =</span> <span class="dv">10</span>)) <span class="sc">+</span> </span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb126-10"><a href="#cb126-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb126-11"><a href="#cb126-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">20</span>, <span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>), <span class="co"># Título principal</span></span>
<span id="cb126-12"><a href="#cb126-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),  <span class="co"># Tamaño del texto del eje X</span></span>
<span id="cb126-13"><a href="#cb126-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">14</span>),  <span class="co"># Tamaño del texto del eje Y</span></span>
<span id="cb126-14"><a href="#cb126-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>), <span class="co"># Tamaño del título del eje X</span></span>
<span id="cb126-15"><a href="#cb126-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">18</span>)  <span class="co"># Tamaño del título del eje Y</span></span>
<span id="cb126-16"><a href="#cb126-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb126-17"><a href="#cb126-17" aria-hidden="true" tabindex="-1"></a>   <span class="co"># Añadir el recuadro con la proporción</span></span>
<span id="cb126-18"><a href="#cb126-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-19"><a href="#cb126-19" aria-hidden="true" tabindex="-1"></a><span class="fu">grid.arrange</span>(grafico_comparacion_auc, grafico_OS_Time)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3 rows containing missing values or values outside the scale range
(`geom_line()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>PARA EL MODELO FINAL</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Generar predicciones del riesgo lineal (linear predictor) para el modelo</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>pred_backward <span class="ot">&lt;-</span> <span class="fu">predict</span>(modelo_backward, <span class="at">type =</span> <span class="st">"lp"</span>)</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear el objeto timeROC para el modelo backward</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>roc_backward <span class="ot">&lt;-</span> <span class="fu">timeROC</span>(</span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">T =</span> Arkansas_SinDatosFaltantes<span class="sc">$</span>OS_Time, </span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">delta =</span> Arkansas_SinDatosFaltantes<span class="sc">$</span>OS_Censor, </span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">marker =</span> pred_backward, </span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">cause =</span> <span class="dv">1</span>, </span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">weighting =</span> <span class="st">"marginal"</span>, </span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">times =</span> <span class="fu">seq</span>(<span class="dv">5</span>, <span class="dv">100</span>, <span class="at">by =</span> <span class="dv">15</span>) <span class="co"># Cambia los tiempos según tu análisis</span></span>
<span id="cb129-12"><a href="#cb129-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb129-13"><a href="#cb129-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-14"><a href="#cb129-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear una escala de colores para los tiempos (azul claro a azul oscuro)</span></span>
<span id="cb129-15"><a href="#cb129-15" aria-hidden="true" tabindex="-1"></a>color_scale <span class="ot">&lt;-</span> <span class="fu">colorRampPalette</span>(<span class="fu">brewer.pal</span>(<span class="dv">9</span>, <span class="st">"Blues"</span>))(<span class="fu">length</span>(roc_backward<span class="sc">$</span>times))</span>
<span id="cb129-16"><a href="#cb129-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-17"><a href="#cb129-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Graficar la curva ROC para el modelo backward</span></span>
<span id="cb129-18"><a href="#cb129-18" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(roc_backward, </span>
<span id="cb129-19"><a href="#cb129-19" aria-hidden="true" tabindex="-1"></a>     <span class="at">time =</span> roc_backward<span class="sc">$</span>times[<span class="dv">1</span>], <span class="co"># Primer tiempo</span></span>
<span id="cb129-20"><a href="#cb129-20" aria-hidden="true" tabindex="-1"></a>     <span class="at">col =</span> color_scale[<span class="dv">1</span>], </span>
<span id="cb129-21"><a href="#cb129-21" aria-hidden="true" tabindex="-1"></a>     <span class="at">lwd =</span> <span class="dv">2</span>, </span>
<span id="cb129-22"><a href="#cb129-22" aria-hidden="true" tabindex="-1"></a>     <span class="at">title =</span> <span class="st">"Curvas ROC en diferentes tiempos (Modelo Backward)"</span>)</span>
<span id="cb129-23"><a href="#cb129-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-24"><a href="#cb129-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Superponer las demás curvas ROC al gráfico</span></span>
<span id="cb129-25"><a href="#cb129-25" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="fu">length</span>(roc_backward<span class="sc">$</span>times)) {</span>
<span id="cb129-26"><a href="#cb129-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(roc_backward, </span>
<span id="cb129-27"><a href="#cb129-27" aria-hidden="true" tabindex="-1"></a>       <span class="at">time =</span> roc_backward<span class="sc">$</span>times[i], </span>
<span id="cb129-28"><a href="#cb129-28" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> color_scale[i], </span>
<span id="cb129-29"><a href="#cb129-29" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="dv">2</span>, </span>
<span id="cb129-30"><a href="#cb129-30" aria-hidden="true" tabindex="-1"></a>       <span class="at">add =</span> <span class="cn">TRUE</span>) <span class="co"># Superponer las curvas</span></span>
<span id="cb129-31"><a href="#cb129-31" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb129-32"><a href="#cb129-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-33"><a href="#cb129-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Añadir una leyenda para identificar los tiempos</span></span>
<span id="cb129-34"><a href="#cb129-34" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"bottomright"</span>, </span>
<span id="cb129-35"><a href="#cb129-35" aria-hidden="true" tabindex="-1"></a>       <span class="at">legend =</span> <span class="fu">paste</span>(<span class="st">"Tiempo ="</span>, roc_backward<span class="sc">$</span>times), </span>
<span id="cb129-36"><a href="#cb129-36" aria-hidden="true" tabindex="-1"></a>       <span class="at">col =</span> color_scale, </span>
<span id="cb129-37"><a href="#cb129-37" aria-hidden="true" tabindex="-1"></a>       <span class="at">lwd =</span> <span class="dv">2</span>, </span>
<span id="cb129-38"><a href="#cb129-38" aria-hidden="true" tabindex="-1"></a>       <span class="at">cex =</span> <span class="fl">0.8</span>, <span class="co"># Ajustar tamaño de texto si es necesario</span></span>
<span id="cb129-39"><a href="#cb129-39" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Leyenda de tiempos"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="otros" class="level1">
<h1>OTROS</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>grafico_B2M_puntos <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Arkansas, <span class="fu">aes</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">564</span>)) <span class="sc">+</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y =</span> B2M), <span class="at">color =</span> <span class="st">"#56B4E9"</span>, <span class="at">size =</span> <span class="dv">2</span>, <span class="at">alpha =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"rect"</span>, <span class="at">xmin =</span> <span class="sc">-</span><span class="dv">2</span>, <span class="at">xmax =</span> <span class="dv">570</span>, <span class="at">ymin =</span> <span class="dv">0</span>, <span class="at">ymax =</span> <span class="fl">2.7</span>, <span class="at">alpha =</span> <span class="fl">0.35</span>,, <span class="at">fill =</span> <span class="st">"lightgreen"</span>) <span class="sc">+</span>  <span class="co"># Cambiado el color del rectángulo</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rect</span>(<span class="fu">aes</span>(<span class="at">xmin =</span> <span class="sc">-</span><span class="cn">Inf</span>, <span class="at">xmax =</span> <span class="cn">Inf</span>, <span class="at">ymin =</span> <span class="dv">0</span>, <span class="at">ymax =</span> <span class="dv">0</span>, <span class="at">fill =</span> <span class="st">"Niveles Normales"</span>), ) <span class="sc">+</span></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">name =</span> <span class="st">" "</span>, <span class="at">values =</span> <span class="st">"lightgreen"</span> )<span class="sc">+</span></span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Diagrama de puntos de B2M"</span>,</span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"*Algunos valores no han sido representados </span><span class="sc">\n</span><span class="st"> por ser demasiado elevados"</span>,</span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="cn">NULL</span>,  <span class="co"># Eliminar etiqueta del eje x</span></span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"B2M"</span>) <span class="sc">+</span></span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="sc">-</span><span class="dv">1</span>, <span class="dv">15</span>) <span class="sc">+</span>  <span class="co"># Ajuste del eje Y</span></span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> numero_observaciones<span class="sc">/</span><span class="dv">2</span> , <span class="at">y =</span> <span class="sc">-</span><span class="dv">1</span>, </span>
<span id="cb130-12"><a href="#cb130-12" aria-hidden="true" tabindex="-1"></a>              <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Sanos: "</span>, proporcionB2M_sano ,<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,<span class="st">"Mal: "</span>, proporcionB2M_mal)),</span>
<span id="cb130-13"><a href="#cb130-13" aria-hidden="true" tabindex="-1"></a>          <span class="at">size =</span> <span class="dv">4</span>, <span class="at">color =</span> <span class="st">"black"</span>)<span class="sc">+</span></span>
<span id="cb130-14"><a href="#cb130-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb130-15"><a href="#cb130-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb130-16"><a href="#cb130-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_blank</span>(),  <span class="co"># Eliminar título del eje x</span></span>
<span id="cb130-17"><a href="#cb130-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_blank</span>()     <span class="co"># Eliminar texto del eje x</span></span>
<span id="cb130-18"><a href="#cb130-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb130-19"><a href="#cb130-19" aria-hidden="true" tabindex="-1"></a>grafico_B2M_puntos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in geom_text(aes(x = numero_observaciones/2, y = -1, label = paste("Sanos: ", : All aesthetics have length 1, but the data has 564 rows.
ℹ Please consider using `annotate()` or provide this layer with data containing
  a single row.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 28 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'GGally':
  method from   
  +.gg   ggplot2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a> d_b<span class="ot">&lt;-</span> Arkansas <span class="sc">%&gt;%</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(SEX,B2M,CRP,CREAT, LDH, ALB,HGB)</span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a>d_b <span class="sc">%&gt;%</span> <span class="fu">ggpairs</span>(<span class="fu">aes</span>(<span class="at">color =</span> SEX ,<span class="at">alpha =</span> <span class="fl">0.7</span>),</span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">upper =</span> <span class="fu">list</span>(<span class="at">continuous =</span> <span class="fu">wrap</span>(<span class="st">"cor"</span>, <span class="at">size =</span> <span class="fl">2.5</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 row containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3 rows containing non-finite outside the scale range
(`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 row containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 row containing non-finite outside the scale range
(`stat_density()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :
Removed 5 rows containing missing values</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :
Removed 4 rows containing missing values</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :
Removing 1 row that contained a missing value
Warning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :
Removing 1 row that contained a missing value
Warning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :
Removing 1 row that contained a missing value</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 5 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4 rows containing non-finite outside the scale range
(`stat_density()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :
Removed 7 rows containing missing values</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :
Removed 4 rows containing missing values
Warning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :
Removed 4 rows containing missing values
Warning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :
Removed 4 rows containing missing values</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3 rows containing non-finite outside the scale range
(`stat_bin()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 7 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3 rows containing non-finite outside the scale range
(`stat_density()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :
Removed 3 rows containing missing values
Warning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :
Removed 3 rows containing missing values
Warning in ggally_statistic(data = data, mapping = mapping, na.rm = na.rm, :
Removed 3 rows containing missing values</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 row containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 row containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 row containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 4 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 3 rows containing missing values or values outside the scale range
(`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Arkansas)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "original order"    "PATID"             "PROT"             
 [4] "SEX"               "RACE"              "ISOTYPE"          
 [7] "AGE"               "B2M"               "CRP"              
[10] "CREAT"             "LDH"               "ALB"              
[13] "HGB"               "ASPC"              "BMPC"             
[16] "MRI"               "Cyto_Abn"          "CPS1"             
[19] "CPR1"              "EFS_Censor"        "EFS_Time"         
[22] "OS_Censor"         "OS_Time"           "AGE_flag"         
[25] "B2M_flag"          "CREAT_flag"        "CRP_flag"         
[28] "LDH_flag"          "ALB_flag"          "MRI_flag"         
[31] "HGB_flag"          "Estado"            "Estado_hombres"   
[34] "Estado_mujeres"    "Estado_CRP"        "Estado_LDH"       
[37] "Estado_ALB"        "Estado_HGB_MALE"   "Estado_HGB_FEMALE"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Arkansas, <span class="fu">aes</span>(<span class="at">x =</span> AGE)) <span class="sc">+</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">5</span>, <span class="at">fill =</span> <span class="st">"#56B4E9"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Distribución de la Edad"</span>, <span class="at">x =</span> <span class="st">"Edad (en meses)"</span>, <span class="at">y =</span> <span class="st">"Frecuencia"</span>) <span class="sc">+</span></span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()<span class="sc">+</span></span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">quantile</span>(Arkansas<span class="sc">$</span>AGE, <span class="fl">0.25</span>), <span class="at">y =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">yend =</span> <span class="dv">115</span> , <span class="at">xend =</span> <span class="fu">quantile</span>(Arkansas<span class="sc">$</span>AGE, <span class="fl">0.25</span>)), <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">linewidth =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="at">geom =</span> <span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">quantile</span>(Arkansas<span class="sc">$</span>AGE, <span class="fl">0.25</span>), <span class="at">y =</span> <span class="dv">120</span>, <span class="at">label =</span> <span class="st">"Q1"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Use of `Arkansas$AGE` is discouraged.
ℹ Use `AGE` instead.
Use of `Arkansas$AGE` is discouraged.
ℹ Use `AGE` instead.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in geom_segment(aes(x = quantile(Arkansas$AGE, 0.25), y = -1, yend = 115, : All aesthetics have length 1, but the data has 564 rows.
ℹ Please consider using `annotate()` or provide this layer with data containing
  a single row.</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="03.PrubasDeModelos_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>